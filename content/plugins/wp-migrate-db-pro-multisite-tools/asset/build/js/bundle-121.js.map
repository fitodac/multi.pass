{"version":3,"sources":["webpack:///webpack/bootstrap bce969de580e19c4e3d9","webpack:///./src/wp-migrate-db-pro-multisite-tools/asset/webpack.index.js","webpack:///./src/wp-migrate-db-pro-multisite-tools/asset/src ./node_modules/imports-loader","webpack:///./src/wp-migrate-db-pro-multisite-tools/asset/src/js/script.js","webpack:///./src/wp-migrate-db-pro/asset/src/js/helpers/wpmdbGlobals.js","webpack:///./src/wp-migrate-db-pro-multisite-tools/asset/src/sass/styles.scss"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","req","keys","forEach","key","map","./js/script.js","./sass/styles.scss","webpackContext","webpackContextResolve","id","Error","resolve","default","wpmdb","mst","remote_mst_unavailable","$","$mst_options","$mst_select_subsite","$mst_options_content","$mst_selected_subsite","$mst_new_prefix_field","$mst_new_prefix","$mst_new_prefix_hidden","$mst_new_prefix_readonly","$mst_unavailable","$mst_different_plugin_version_notice","$mst_different_prefix_notice","finished_loading","original_local_url","reverse_replace","table_prefix","text","doing_mst_select_subsite","attr","is","local_is_multisite","wpmdb_data","site_details","is_multisite","remote_is_multisite","undefined","remote_connection_data","disable_mst_options","do_action","prop","addClass","hide","hide_show_options","unavailable","inArray","functions","wpmdb_migration_type","migration_selection","prefix","maybe_update_local_url_for_subsite","html","url","show","mst_version","removeAttr","removeClass","selected_subsite_changed","maybe_lock_replace_url","maybe_pin_replace_url","multisite_target","hide_show_new_prefix_field","val","children","new_prefix","selected_subsite","get_selected_subsite","blog_id","details","find","mst_selected_subsite","isNaN","get_selected_subsite_from_profile","domain_and_path","e","event","_typeof","subsite_for_tables","update_table_selects","new_local_url","replace_right","is_subsite_table","table_name","escaped_table_name","preg_quote","RegExp","exec","toLowerCase","indexOf","update_remote_connection_data","connection_data","mst_available","maybe_update_selected_subsite_options","update_selected_subsite_options","subsites","empty","append","wpmdbmst_strings","select_subsite","each","path","apply_filters","selected","add_action","args","migration_type","last_migration_type","wpmdb_toggle_migration_action_text","data","setTimeout","add_filter","exclude","substr","length","subsite_for_table","table_is","index","ms_table","value","alert","please_select_a_subsite","trim","please_enter_a_prefix","escaped_new_prefix","validate_new_prefix","new_prefix_contents","selected_tables","enable","document","ready","on","select_subsite_changed","jQuery","window","ajaxurl","wpmdb_strings","WPMDBGlobals","_classCallCheck","this","show_ssl_notice","doing_save_profile","doing_ajax","profile_name_edited","migration_intent","doing_licence_registration_ajax","migration_paused","last_replace_switch","connection_established","checked_licence","show_prefix_notice","force_reconnect","show_version_notice","migration_completed","currently_migrating","dump_filename","dump_path","remote_site","secret_key","form_data","stage","elapsed_interval","completed_msg","tables_to_migrate","previous_progress_title","previous_progress_text_primary","previous_progress_text_secondary","cancelling_text","paused_text","migration_cancelled","flag_skip_delay","delay_between_requests","fade_duration","pause_before_finalize","is_auto_pause_before_finalize","$connection_info_box","$push_select","clone","$pull_select","$push_post_type_select","$pull_post_type_select","$push_select_backup","$pull_select_backup","spinner_url","get_spinner_url","ajax_spinner","width","z","Array","join","parseInt","arr1","arr2","v","r","push","pin","parents","code","jqXHR","wpmdbGetAjaxErrors","connection_local_server_problem","ajax","type","dataType","cache","action","nonce","nonces","get_log","error","textStatus","errorThrown","update_log_problem","success","replace","results","location","search","decodeURIComponent","remote_scheme","scheme","$ssl_notice","test","this_tables","this_table_sizes_hr","create_table_select","common","tables","table_sizes_hr","profile","_this","blur","maybe_show_select_table_notice","create_new_profile","profile_name","elements","not","serialize","after","save_profile","save_profile_problem","remove","saved","fadeOut","updated_profile_id","new_profile_key","new_profile_id","new_li","createTextNode","before","updated_url","href","updated_profile_name","parent","history","pushState","$crumbs","this_plugin_base","prepend","cancelling_migration","css","visibility","cancelling_find_replace","current_migration","setState","completing_current_request","execute_next_step","checkbox_wrap","$switch","$checkbox","toggleClass","switch_on","hasClass","trigger","backup_table_prefix","uploads_dir","upload_dir_long","write_permission","$connection_status","$directory_permission_notice","$compatibility_older_mysql","$mst_required","$keep_active_plugins","$step_two","$backup_options","new_migration_type","$pull_push_connection_info","connection_info","split","$migration_list_li","connection_textarea","focus","connection_box_changed","this_uploads_dir","this_upload_dir_long","this_prefix","write_permissions","maybe_show_backup_disabled_msg","get_domain_name","$old_replace_col","eq","maybe_show_mixed_cased_table_name_warning","upload_dir","$create_backup","$create_backup_label","$backup_option_disabled","old_url","old_path","previous_connection_data","remove_protocol","old_val","exclude_post_types_warning","hash","skip_addons_check","should_check_licence","check_licence","refresh_debug_log","$proVersion","licence","update_licence_content","self","context","license_check_problem","licence_msg","support_msg","addons_msg","$support_content","$addons_content","$licence_content","dbrains_api_down","message","errors","subscription_expired","support","addons","msg","addon_content","stop","display","slideUp","fadeIn","click","has_licence","is_pro","get_tables_to_migrate","lower_case_table_names","licence_key","masked_licence","fetching_license","label","domain","intent","migrating_stage_label","completed_stage_label","push_migration_label_migrating","push_migration_label_completed","pull_migration_label_migrating","pull_migration_label_completed","find_replace_label_migrating","find_replace_label_completed","exporting_please_wait","exporting_complete","update_domain_placeholder","parent_selector","unit","display_value","slider","wpmdb_add_commas","instance","pause","resumeTimer","find_replace_paused","off","temp_prefix","this_temp_prefix","substring","lock","display_info","amount","toFixed","wpmdb_default_profile","disable_export_type_controls","establishing_remote_connection","verify_connection_to_remote_site","convert_post_type_selection","wpmdb_convert_post_type_selection","get_ajax_errors","responseText","enable_export_type_controls","wpmdb_error","body","maybe_show_mst_warning","maybe_show_ssl_warning","maybe_show_prefix_notice","set_connection_data","move_connection_info_box","loaded_tables","wpmdb_loaded_tables","loaded_post_types","wpmdb_loaded_post_types","select_post_types","$post_type_select","createElement","multiple","class","post_types","wpmdb_convert_exclude_revisions","loaded_tables_backup","wpmdb_loaded_tables_backup","$table_select_backup","current_row","primary_keys","iterator","_this2","model","getStageItems","table","hooks","migration_complete","wpmdb_flush","migration_complete_events","next_step_in_migration","fn","wpmdb_call_next_hook","setActiveStage","last_table","gzip","request_data","migration_state_id","migrate_table","bottleneck","path_current_site","domain_current_site","timeout","progress_text","table_process_problem","status","statusText","response","migration_failed","console","log","migration_error","row_information","wpmdb_parse_json","error_text","table_process_problem_empty_response","item_name","setText","getStageModel","setItemRowsTransferred","migrate_table_recursive","non_fatal_errors","cancel_success","migration_cancelled_success","find_replace_cancelled_success","completed_with_some_errors","call_stack","setMigrationComplete","_this3","migrate_complete_text","this_download_url","encodeURIComponent","completed_dump_located_at","finalizing_migration","finalize_migration","finalize_tables_problem","_this4","flushing","flush","flush_problem","_this5","pauseTimer","pause_text","paused_before_finalize","find_replace_paused_before_finalize","paused","set_pause_resume_button","cancel_migration","resume","progress_msg","removing_local_sql","removing_local_backup","removing_local_temp_tables","removing_remote_sql","removing_remote_temp_tables","migration_cancellation_failed","manually_remove_temp_files","find_replace_cancelled","setStatus","apply","$prefix_notice","show_mst_warning","multisite","subsite_export","please_select_one_table","please_select_one_table_import","please_select_one_table_backup","$table_select","size","mig_type","this_prefixed_tables","prefixed_tables","save_string","migrate_string","_this6","$this","error_message","connection_info_missing","connection_words","connection_info_incorrect","validate_url","connection_info_url_invalid","key_length","connection_info_key_invalid","connection_info_local_url","connection_info_local_key","new_connection_info_contents","openssl_available","change_replace_values","refresh_table_selects","this_url","this_path","this_domain"],"mappings":"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","file":"wp-migrate-db-pro-multisite-tools/asset/build/js/bundle-121.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bce969de580e19c4e3d9","/*\nFormat:\n\nrequire.context(directory, useSubdirectories = false, regExp = /^\\.\\//)\n\n*/\nlet req = require.context(\n\t'imports-loader?$=>window.jQuery!./src',\n\ttrue,\n\t/^(.*\\.(js|sass|scss$))/im\n);\n\nreq.keys().forEach( function( key ) {\n\treq( key );\n} );\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/wp-migrate-db-pro-multisite-tools/asset/webpack.index.js","var map = {\n\t\"./js/script.js\": 2,\n\t\"./sass/styles.scss\": 4\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/wp-migrate-db-pro-multisite-tools/asset/src ./node_modules/imports-loader?$=>window.jQuery ^(.*\\.(js|sass|scss$))/i\n// module id = 1\n// module chunks = 0","import WPMDBGlobals from '../../../../wp-migrate-db-pro/asset/src/js/helpers/wpmdbGlobals';\nconst globals = new WPMDBGlobals();\n\nwpmdb.mst = {\n\tremote_mst_unavailable: false\n};\n\n( function( $, wpmdb ) {\n\tvar $mst_options = $( '.mst-options' );\n\tvar $mst_select_subsite = $( '#mst-select-subsite' );\n\tvar $mst_options_content = $( '.mst-options .expandable-content' );\n\tvar $mst_selected_subsite = $( '#mst-selected-subsite' );\n\tvar $mst_new_prefix_field = $( '.new-prefix-field' );\n\tvar $mst_new_prefix = $( '#new-prefix' );\n\tvar $mst_new_prefix_hidden = $( '#new-prefix-hidden' );\n\tvar $mst_new_prefix_readonly = $( '#new-prefix-readonly' );\n\tvar $mst_unavailable = $( '.mst-unavailable' );\n\tvar $mst_different_plugin_version_notice = $( '.mst-different-plugin-version-notice' );\n\tvar $mst_different_prefix_notice = $( '.mst-different-prefix-notice' );\n\n\t//Switched to true on `verify_connection_to_remote_site` action\n\tvar finished_loading = false;\n\n\tvar original_local_url = null;\n\tvar reverse_replace = false;\n\tvar table_prefix = $( '.table-select-wrap .table-prefix' ).text();\n\n\tfunction doing_mst_select_subsite() {\n\t\treturn '1' === $mst_select_subsite.attr( 'data-available' ) && $mst_select_subsite.is( ':checked' ) ? true : false;\n\t}\n\n\tfunction local_is_multisite() {\n\t\treturn 'true' === wpmdb_data.site_details.is_multisite;\n\t}\n\n\tfunction remote_is_multisite() {\n\t\treturn undefined !== wpmdb.mst.remote_connection_data &&\n\t\t\tundefined !== wpmdb.mst.remote_connection_data.site_details &&\n\t\t\tundefined !== wpmdb.mst.remote_connection_data.site_details.is_multisite &&\n\t\t\t'true' === wpmdb.mst.remote_connection_data.site_details.is_multisite;\n\t}\n\n\tfunction disable_mst_options() {\n\t\t$.wpmdb.do_action( 'wpmdb_lock_replace_url', false );\n\t\t$.wpmdb.do_action( 'wpmdb_enable_table_migration_options' );\n\t\t$mst_select_subsite.attr( 'data-available', '0' );\n\t\t$mst_select_subsite.prop( 'checked', false );\n\t\t$mst_select_subsite.attr( 'disabled', 'disabled' );\n\t\t$( '.mst' ).addClass( 'disabled' );\n\t\t$mst_options_content.hide();\n\t}\n\n\tfunction enable_mst_options() {\n\t\t$mst_select_subsite.attr( 'data-available', '1' );\n\t\t$mst_select_subsite.removeAttr( 'disabled' );\n\t\t$( '.mst' ).removeClass( 'disabled' );\n\t}\n\n\tfunction hide_show_options( unavailable ) {\n\n\t\t// MST not supported for exports or find/replace from single site install.\n\t\tif ( -1 !== $.inArray( wpmdb.functions.wpmdb_migration_type(), [ 'savefile', 'find_replace' ] ) && !local_is_multisite() ) {\n\t\t\tdisable_mst_options();\n\t\t\t$mst_options.hide();\n\t\t\treturn;\n\t\t}\n\n\t\t// MST not supported for imports\n\t\t// TODO: Remove this test if MST is to support import migrations.\n\t\tif ( 'import' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\tdisable_mst_options();\n\t\t\t$mst_options.hide();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !finished_loading || ( undefined === wpmdb.mst.remote_connection_data && -1 !== $.inArray( wpmdb.migration_selection, [ 'push', 'pull' ] ) ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Either local or remote must be a multisite.\n\t\tif ( !local_is_multisite() && !remote_is_multisite() ) {\n\t\t\tdisable_mst_options();\n\t\t\t$mst_options.hide();\n\t\t\treturn;\n\t\t}\n\n\t\t// Local and remote must not both be multisite.\n\t\t// TODO: Remove this test for multisite <=> multisite.\n\t\tif ( local_is_multisite() && remote_is_multisite() ) {\n\t\t\tdisable_mst_options();\n\t\t\t$mst_options.hide();\n\t\t\treturn;\n\t\t}\n\n\t\t// For Pull/Push remote should have same base prefix.\n\t\t// TODO: Allow migrating to different base prefix.\n\t\tif (\n\t\t\t'savefile' !== wpmdb.functions.wpmdb_migration_type() &&\n\t\t\tfalse === unavailable &&\n\t\t\t'undefined' !== typeof wpmdb.mst.remote_connection_data &&\n\t\t\t'undefined' !== typeof wpmdb.mst.remote_connection_data.site_details &&\n\t\t\twpmdb_data.site_details.prefix !== wpmdb.mst.remote_connection_data.site_details.prefix\n\t\t) {\n\t\t\tdisable_mst_options();\n\t\t\tmaybe_update_local_url_for_subsite( false );\n\t\t\t$( '.mst-remote-location' ).html( wpmdb.mst.remote_connection_data.url );\n\t\t\t$( '.mst-remote-prefix' ).html( wpmdb.mst.remote_connection_data.site_details.prefix );\n\t\t\t$mst_different_prefix_notice.show();\n\t\t\treturn;\n\t\t}\n\t\t$mst_different_prefix_notice.hide();\n\n\t\t// For Pull/Push remote also needs MST.\n\t\tif ( unavailable && 'savefile' !== wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\tdisable_mst_options();\n\t\t\tmaybe_update_local_url_for_subsite( false );\n\t\t\t$mst_unavailable.show();\n\t\t\treturn;\n\t\t}\n\t\t$mst_unavailable.hide();\n\n\t\t// Check remote version of addon is the same.\n\t\tif (\n\t\t\t'savefile' !== wpmdb.functions.wpmdb_migration_type() &&\n\t\t\t'undefined' !== typeof wpmdb.mst.remote_connection_data &&\n\t\t\twpmdb_data.mst_version !== wpmdb.mst.remote_connection_data.mst_version\n\t\t) {\n\t\t\tdisable_mst_options();\n\t\t\tmaybe_update_local_url_for_subsite( false );\n\t\t\t$( '.mst-remote-location' ).html( wpmdb.mst.remote_connection_data.url );\n\t\t\t$( '.mst-remote-version' ).html( wpmdb.mst.remote_connection_data.mst_version );\n\t\t\t$mst_different_plugin_version_notice.show();\n\t\t\treturn;\n\t\t}\n\t\t$mst_different_plugin_version_notice.hide();\n\n\t\tenable_mst_options();\n\t\tif ( doing_mst_select_subsite() ) {\n\t\t\t$mst_options_content.show();\n\t\t\tselected_subsite_changed();\n\t\t} else {\n\t\t\t$mst_options_content.hide();\n\t\t}\n\n\t\tmaybe_lock_replace_url();\n\n\t\t$mst_options.show();\n\t}\n\n\tfunction maybe_lock_replace_url() {\n\t\tif ( doing_mst_select_subsite() && -1 === $.inArray( wpmdb.functions.wpmdb_migration_type(), [\n\t\t\t\t'savefile',\n\t\t\t\t'find_replace'\n\t\t\t] ) ) {\n\t\t\t$.wpmdb.do_action( 'wpmdb_lock_replace_url', true );\n\t\t} else {\n\t\t\t$.wpmdb.do_action( 'wpmdb_lock_replace_url', false );\n\t\t}\n\t}\n\n\tfunction maybe_pin_replace_url() {\n\t\tif ( local_is_multisite() || remote_is_multisite() ) {\n\t\t\t$.wpmdb.do_action( 'wpmdb_pin_replace_url', true );\n\t\t} else {\n\t\t\t$.wpmdb.do_action( 'wpmdb_pin_replace_url', false );\n\t\t}\n\t}\n\n\tfunction multisite_target() {\n\t\treturn ( 'pull' === wpmdb.functions.wpmdb_migration_type() && local_is_multisite() ) ||\n\t\t\t( 'push' === wpmdb.functions.wpmdb_migration_type() && remote_is_multisite() );\n\t}\n\n\tfunction hide_show_new_prefix_field() {\n\t\tif ( '' === $mst_selected_subsite.val() ) {\n\t\t\t$mst_new_prefix_field.hide();\n\t\t\treturn;\n\t\t}\n\n\t\t// If not an Export, we know what the new table prefix should be.\n\t\tif ( 'savefile' !== wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\t$mst_new_prefix.hide();\n\t\t\t$mst_new_prefix_readonly.show();\n\t\t\t$mst_new_prefix_field.children( 'label' ).addClass( 'disabled' );\n\n\t\t\tvar new_prefix = table_prefix;\n\t\t\tvar selected_subsite = get_selected_subsite();\n\n\t\t\tif ( multisite_target() && undefined !== selected_subsite.blog_id && 1 < selected_subsite.blog_id ) {\n\t\t\t\tnew_prefix = new_prefix + selected_subsite.blog_id + '_';\n\t\t\t}\n\n\t\t\t// TODO: Determine new table prefix if target has different base or is not single site install.\n\n\t\t\t$mst_new_prefix.val( new_prefix );\n\t\t\t$mst_new_prefix_hidden.val( new_prefix );\n\t\t\t$mst_new_prefix_readonly.text( new_prefix );\n\t\t} else {\n\t\t\t$mst_new_prefix.show();\n\t\t\t$mst_new_prefix_readonly.hide();\n\t\t\t$mst_new_prefix_field.children( 'label' ).removeClass( 'disabled' );\n\t\t}\n\t\t$mst_new_prefix_field.show();\n\t}\n\n\tfunction select_subsite_changed() {\n\t\tvar args = doing_mst_select_subsite();\n\n\t\tmaybe_lock_replace_url();\n\n\t\t// Media Files uses this hook\n\t\t$.wpmdb.do_action( 'wpmdbmst_select_subsite_changed', args );\n\n\t\tmaybe_update_selected_subsite_options( args );\n\t\tselected_subsite_changed( );\n\t}\n\n\tfunction get_selected_subsite() {\n\t\tvar details = {};\n\n\t\tif ( doing_mst_select_subsite() ) {\n\t\t\tvar blog_id = $mst_selected_subsite.find( 'option:selected' ).val();\n\n\t\t\tif ( '' === blog_id ) {\n\t\t\t\tblog_id = get_selected_subsite_from_profile();\n\t\t\t}\n\n\t\t\tif ( '' === blog_id ) {\n\t\t\t\tdetails = false;\n\t\t\t} else {\n\t\t\t\tdetails.blog_id = blog_id;\n\t\t\t\tdetails.domain_and_path = $mst_selected_subsite.find( 'option:selected' ).text();\n\t\t\t}\n\t\t}\n\n\t\treturn details;\n\t}\n\n\tfunction get_selected_subsite_from_profile() {\n\t\tvar blog_id = '';\n\n\t\tif ( undefined !== wpmdb_data.mst_selected_subsite && !isNaN( wpmdb_data.mst_selected_subsite ) ) {\n\t\t\tblog_id = wpmdb_data.mst_selected_subsite;\n\t\t}\n\n\t\treturn blog_id;\n\t}\n\n\tfunction selected_subsite_changed( e ) {\n\t\tvar selected_subsite = get_selected_subsite();\n\n\t\tupdate_table_selects( selected_subsite, e );\n\t\tmaybe_update_local_url_for_subsite( selected_subsite );\n\t\thide_show_new_prefix_field( selected_subsite );\n\t}\n\n\tvar subsite_for_tables = false;\n\n\t/**\n\t * \n\t * @param {object} selected_subsite \n\t * @param {object|undefined} event \n\t */\n\tfunction update_table_selects( selected_subsite, event ) {\n\n\t\t// Force table select lists to be refreshed (and filtered again).\n\t\t$.wpmdb.do_action( 'wpmdb_refresh_table_selects' );\n\n\t\t// If a subsite selection is saved in the loaded profile, and we're not changing the subsite selector (event passed in from jQuery)\n\t\t// Just load the 'saved' tables\n\t\tif ( 'undefined' !== typeof wpmdb_data.mst_selected_subsite && 'object' !== typeof event ) {\n\t\t\tfinished_loading = false;\n\n\t\t// Otherwise we want to select all tables in the table selector\t\n\t\t}else{\n\t\t\tfinished_loading = true;\n\t\t\tif ('pull' === wpmdb.functions.wpmdb_migration_type()) {\n\t\t\t\t$.wpmdb.do_action('wpmdb_update_pull_table_select');\n\t\t\t} else {\n\t\t\t\t$.wpmdb.do_action('wpmdb_update_push_table_select');\n\t\t\t}\n\t\t}\n\t\t\n\t\tsubsite_for_tables = selected_subsite;\n\n\t\t// We may need to enable or disable the ability to select the \"Migrate all tables with prefix ...\" option.\n\t\tif ( doing_mst_select_subsite() ) {\n\t\t\t$.wpmdb.do_action( 'wpmdb_disable_table_migration_options' );\n\n\t\t\t// `finished_loading` is key here, it determines if all the tables will be selected or not\n\t\t\tif (\n\t\t\t\t( finished_loading &&\n\t\t\t\t\t( false === subsite_for_tables ||\n\t\t\t\t\t\t( 'undefined' !== typeof subsite_for_tables.blog_id &&\n\t\t\t\t\t\t\t'undefined' !== typeof selected_subsite.blog_id &&\n\t\t\t\t\t\t\tsubsite_for_tables.blog_id === selected_subsite.blog_id ) ) ) ||\n\t\t\t\t( 'savefile' === wpmdb.migration_selection || 'find_replace' === wpmdb.migration_selection )\n\t\t\t) {\n\t\t\t\t$.wpmdb.do_action( 'wpmdb_select_all_tables' );\n\t\t\t}\n\t\t} else {\n\t\t\t$.wpmdb.do_action( 'wpmdb_enable_table_migration_options' );\n\t\t}\n\t}\n\n\tfunction select_subsite_tables_on_change_action( data ) {\n\t\tif (\n\t\t\tundefined !== wpmdb.mst.remote_connection_data &&\n\t\t\tdoing_mst_select_subsite() &&\n\t\t\tdata.last_migration_type !== data.migration_type\n\t\t) {\n\n\t\t\t// Timeout required otherwise wpmdb_update_push/pull_table_select action runs after this\n\t\t\tsetTimeout( function() {\n\t\t\t\t$.wpmdb.do_action( 'wpmdb_select_all_tables' );\n\t\t\t} );\n\t\t}\n\t}\n\n\tfunction maybe_update_local_url_for_subsite( selected_subsite ) {\n\t\tvar new_local_url = original_local_url;\n\t\tif ( undefined === selected_subsite || 'find_replace' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\treturn;\n\t\t} else if ( undefined !== selected_subsite.domain_and_path ) {\n\t\t\tnew_local_url = '//' + selected_subsite.domain_and_path;\n\t\t}\n\n\t\tvar replace_right = false;\n\t\tif ( multisite_target() ) {\n\t\t\treplace_right = true;\n\t\t}\n\n\t\tif ( reverse_replace ) {\n\t\t\treplace_right = !replace_right;\n\t\t}\n\n\t\tif ( replace_right ) {\n\t\t\t$( '.replace-row.pin .replace-right-col input[type=\"text\"]' ).val( new_local_url );\n\t\t} else {\n\t\t\t$( '.replace-row.pin .old-replace-col input[type=\"text\"]' ).val( new_local_url );\n\t\t}\n\t}\n\n\tfunction is_subsite_table( table_prefix, table_name ) {\n\t\tvar selected_subsite = get_selected_subsite();\n\n\t\tif ( undefined !== selected_subsite.blog_id ) {\n\t\t\tif ( 1 < selected_subsite.blog_id ) {\n\t\t\t\ttable_prefix = table_prefix + selected_subsite.blog_id + '_';\n\t\t\t\tvar pos = table_name.toLowerCase().indexOf( table_prefix.toLowerCase() );\n\n\t\t\t\tif ( 0 === pos ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar escaped_table_name = wpmdb.functions.preg_quote( table_name );\n\t\t\t\tvar regex = new RegExp( table_prefix + '([0-9]+)_', 'i' );\n\t\t\t\tvar results = regex.exec( escaped_table_name );\n\t\t\t\treturn null === results; // If null is returned, there was no match which is good in this case.\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction filter_table_for_subsite( exclude, table_name ) {\n\t\tif ( doing_mst_select_subsite() ) {\n\n\t\t\t// If there is no subsite selected then we should exclude all tables.\n\t\t\tif ( false === get_selected_subsite() ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// If table does not have correct base table prefix for site then exclude from subsite export.\n\t\t\tif ( table_name.substr( 0, table_prefix.length ) !== table_prefix ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( 1 === wpmdb.functions.subsite_for_table( table_prefix, table_name ) ) {\n\n\t\t\t\t// wp_users and wp_usermeta are relevant to all sites, shortcut out.\n\t\t\t\tif ( wpmdb.functions.table_is( table_prefix, 'users', table_name ) || wpmdb.functions.table_is( table_prefix, 'usermeta', table_name ) ) {\n\t\t\t\t\treturn exclude;\n\t\t\t\t}\n\n\t\t\t\t// Following tables are Multisite setup tables and can be excluded from migration.\n\t\t\t\t// We'll handle getting any data we need from these tables elsewhere.\n\t\t\t\tvar ms_tables = [ 'blog_versions', 'blogs', 'registration_log', 'signups', 'site', 'sitemeta' ];\n\n\t\t\t\t$.each( ms_tables, function( index, ms_table ) {\n\t\t\t\t\tif ( wpmdb.functions.table_is( table_prefix, ms_table, table_name ) ) {\n\t\t\t\t\t\texclude = true;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// If pulling from a single site install, all properly prefixed tables are relevant.\n\t\t\tif ( 'pull' === wpmdb.functions.wpmdb_migration_type() && !remote_is_multisite() ) {\n\t\t\t\treturn exclude;\n\t\t\t}\n\n\t\t\t// If pushing from a single site install, all properly prefixed tables are relevant.\n\t\t\tif ( 'push' === wpmdb.functions.wpmdb_migration_type() && !local_is_multisite() ) {\n\t\t\t\treturn exclude;\n\t\t\t}\n\n\t\t\tif ( false === is_subsite_table( table_prefix, table_name ) ) {\n\t\t\t\texclude = true;\n\t\t\t}\n\t\t}\n\n\t\treturn exclude;\n\t}\n\n\tfunction validate_new_prefix( new_prefix ) {\n\t\tvar escaped_new_prefix = wpmdb.functions.preg_quote( new_prefix );\n\n\t\tvar regex = new RegExp( '[^a-z0-9_]', 'i' );\n\t\tvar results = regex.exec( escaped_new_prefix );\n\t\treturn null === results; // If null is returned there was no match, which is good in this case.\n\t}\n\n\tfunction filter_migration_profile_ready( value, args ) {\n\t\tif ( false === doing_mst_select_subsite() ) {\n\t\t\treturn value;\n\t\t}\n\n\t\tvar new_prefix = $mst_new_prefix.val();\n\n\t\tif ( false === get_selected_subsite() ) {\n\t\t\talert( wpmdbmst_strings.please_select_a_subsite );\n\t\t\tvalue = false;\n\t\t} else if ( 0 === new_prefix.trim().length ) {\n\t\t\talert( wpmdbmst_strings.please_enter_a_prefix );\n\t\t\tvalue = false;\n\t\t} else if ( false === validate_new_prefix( new_prefix ) ) {\n\t\t\talert( wpmdbmst_strings.new_prefix_contents );\n\t\t\tvalue = false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tfunction filter_backup_selected_tables( selected_tables ) {\n\t\tif ( doing_mst_select_subsite() && 'find_replace' !== wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\tvar selected_subsite = get_selected_subsite();\n\n\t\t\t// If dealing with non-primary subsite tables and a single site install, we may need to adjust table names to be backed up.\n\t\t\tif ( undefined !== selected_subsite.blog_id && 1 < selected_subsite.blog_id && ( !local_is_multisite() || !remote_is_multisite() ) ) {\n\t\t\t\t$.each( selected_tables, function( index, table_name ) {\n\t\t\t\t\tif ( false === wpmdb.table_is( table_prefix, 'users', table_name ) && false === wpmdb.table_is( table_prefix, 'usermeta', table_name ) ) {\n\n\t\t\t\t\t\t// Table to backup needs subsite prefix?\n\t\t\t\t\t\tif ( false === is_subsite_table( table_prefix, table_name ) && multisite_target() ) {\n\t\t\t\t\t\t\tselected_tables[ index ] = $mst_new_prefix.val() + table_name.substr( table_prefix.length );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Table to backup needs subsite prefix removed?\n\t\t\t\t\t\tif ( true === is_subsite_table( table_prefix, table_name ) && !multisite_target() ) {\n\t\t\t\t\t\t\tselected_tables[ index ] = $mst_new_prefix.val() + table_name.substr( ( table_prefix + selected_subsite.blog_id + '_' ).length );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn selected_tables;\n\t}\n\n\tfunction filter_mf_enable_select_subsites( enable ) {\n\t\tif ( false !== enable && doing_mst_select_subsite() ) {\n\t\t\tenable = false;\n\t\t}\n\n\t\treturn enable;\n\t}\n\n\tfunction update_remote_connection_data( connection_data ) {\n\t\twpmdb.mst.remote_connection_data = connection_data;\n\t\twpmdb.mst.remote_mst_unavailable = ( 'undefined' === typeof connection_data.mst_available );\n\t}\n\n\tfunction maybe_update_selected_subsite_options() {\n\t\tif ( false === doing_mst_select_subsite() || !remote_is_multisite() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update subsites list depending on whether multisite is local or remote.\n\t\t// TODO: Review this block when subsite <=> subsite implemented.\n\t\tif ( local_is_multisite() && !remote_is_multisite() ) {\n\t\t\tupdate_selected_subsite_options( wpmdb_data.site_details.subsites );\n\t\t} else if ( !local_is_multisite() && remote_is_multisite() ) {\n\t\t\tupdate_selected_subsite_options( wpmdb.mst.remote_connection_data.site_details.subsites );\n\t\t}\n\t}\n\n\tfunction update_selected_subsite_options( subsites ) {\n\t\tvar selected_subsite = get_selected_subsite();\n\n\t\t$( $mst_selected_subsite ).empty();\n\n\t\t$( $mst_selected_subsite ).append( '<option value=\"\">-- ' + wpmdbmst_strings.select_subsite + ' --</option>' );\n\n\t\t$.each( subsites, function( blog_id, path ) {\n\t\t\tif ( $.wpmdb.apply_filters( 'wpmdb_exclude_subsite', false, path ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar selected = ' ';\n\n\t\t\tif ( false !== selected_subsite && blog_id === selected_subsite.blog_id ) {\n\t\t\t\tselected = ' selected=\"selected\" ';\n\t\t\t}\n\n\t\t\t$( $mst_selected_subsite ).append( '<option' + selected + 'value=\"' + blog_id + '\">' + path + '</option>' );\n\t\t} );\n\t}\n\n\t// IMPORTANT: This action fires before find/replace columns are swapped for pull/push.\n\t$.wpmdb.add_action( 'move_connection_info_box', function( args ) {\n\t\ttable_prefix = $( '.table-select-wrap .table-prefix' ).text();\n\t\tif ( null === original_local_url ) {\n\t\t\toriginal_local_url = $.wpmdb.apply_filters( 'wpmdb_base_old_url' );\n\t\t}\n\n\t\tif ( undefined !== args.migration_type && undefined !== args.last_migration_type ) {\n\t\t\tif ( args.migration_type !== args.last_migration_type && ( 'pull' === args.migration_type || 'pull' === args.last_migration_type ) ) {\n\t\t\t\treverse_replace = true;\n\t\t\t}\n\t\t}\n\t\twpmdb.functions.wpmdb_toggle_migration_action_text();\n\t\thide_show_options( wpmdb.mst.remote_mst_unavailable );\n\t\t$.wpmdb.do_action( 'wpmdb_refresh_table_selects' );\n\t\tif ( reverse_replace ) {\n\t\t\treverse_replace = false;\n\t\t}\n\t} );\n\n\t$.wpmdb.add_action( 'verify_connection_to_remote_site', function( connection_data ) {\n\t\tupdate_remote_connection_data( connection_data );\n\n\t\t// Set `finished_loading` variable after connection to remote site is complete.\n\t\tfinished_loading = true;\n\t\t\n\t\thide_show_options( wpmdb.mst.remote_mst_unavailable );\n\t} );\n\n\t$.wpmdb.add_action( 'move_connection_info_box', maybe_pin_replace_url );\n\t$.wpmdb.add_action( 'move_connection_info_box', maybe_update_selected_subsite_options );\n\t$.wpmdb.add_action( 'move_connection_info_box', select_subsite_tables_on_change_action );\n\n\t$.wpmdb.add_action( 'wpmdb_connection_data_updated', update_remote_connection_data );\n\t$.wpmdb.add_action( 'wpmdb_connection_data_updated', maybe_pin_replace_url );\n\t$.wpmdb.add_action( 'wpmdb_connection_data_updated', maybe_update_selected_subsite_options );\n\n\t$.wpmdb.add_filter( 'wpmdb_exclude_table', filter_table_for_subsite );\n\t$.wpmdb.add_filter( 'wpmdb_migration_profile_ready', filter_migration_profile_ready );\n\t$.wpmdb.add_filter( 'wpmdb_backup_selected_tables', filter_backup_selected_tables );\n\n\t$.wpmdb.add_filter( 'wpmdbmf_enable_select_subsites', filter_mf_enable_select_subsites );\n\n\thide_show_new_prefix_field();\n\n\t$( document ).ready( function() {\n\t\t//CHECKBOX\n\t\t$( 'body' ).on( 'change', '#mst-select-subsite', function( e ) {\n\t\t\tselect_subsite_changed();\n\t\t} );\n\n\t\t//DROPDOWN\n\t\t$( 'body' ).on( 'change', '#mst-selected-subsite', function( e ) {\n\t\t\tselected_subsite_changed( e );\n\t\t} );\n\n\t\thide_show_options( wpmdb.mst.remote_mst_unavailable );\n\t} );\n\n} )( jQuery, wpmdb );\n\n\n\n// WEBPACK FOOTER //\n// ./src/wp-migrate-db-pro-multisite-tools/asset/src/js/script.js","const $ = window.jQuery;\nconst ajaxurl = window.ajaxurl;\nconst wpmdb_strings = window.wpmdb_strings;\nconst wpmdb_data = window.wpmdb_data;\n\nexport default class WPMDBGlobals {\n\tconstructor() {\n\t\tthis.show_ssl_notice = false;\n\t\tthis.doing_save_profile = false;\n\t\tthis.doing_ajax = false;\n\t\tthis.profile_name_edited = false;\n\t\tthis.migration_intent = null;\n\t\tthis.doing_licence_registration_ajax = false;\n\t\tthis.migration_paused = false;\n\t\tthis.last_replace_switch = wpmdb.functions.wpmdb_migration_type();\n\t\tthis.connection_established = false;\n\t\tthis.profile_name_edited = false;\n\t\tthis.checked_licence = false;\n\t\tthis.show_prefix_notice = false;\n\t\tthis.show_ssl_notice = false;\n\t\tthis.force_reconnect = false;\n\t\tthis.migration_selection = '';\n\t\tthis.show_version_notice = false;\n\t\tthis.migration_completed = false;\n\t\tthis.currently_migrating = false;\n\t\tthis.dump_filename = '';\n\t\tthis.dump_path = '';\n\t\tthis.migration_intent = '';\n\t\tthis.remote_site = null;\n\t\tthis.secret_key = null;\n\t\tthis.form_data = null;\n\t\tthis.stage = null;\n\t\tthis.elapsed_interval = null;\n\t\tthis.completed_msg = null;\n\t\tthis.tables_to_migrate = [];\n\t\tthis.migration_paused = false;\n\t\tthis.previous_progress_title = '';\n\t\tthis.previous_progress_text_primary = '';\n\t\tthis.previous_progress_text_secondary = '';\n\t\tthis.cancelling_text = '';\n\t\tthis.paused_text = '';\n\t\tthis.migration_cancelled = false;\n\t\tthis.flag_skip_delay = false;\n\t\tthis.delay_between_requests = 0;\n\t\tthis.fade_duration = 400;\n\t\tthis.pause_before_finalize = false;\n\t\tthis.is_auto_pause_before_finalize = false;\n\t\tthis.$connection_info_box = $( '.connection-info-wrapper' );\n\t\tthis.$push_select = window.wpmdb.$push_select = $( '#select-tables' ).clone();\n\t\tthis.$pull_select = window.wpmdb.$pull_select = $( '#select-tables' ).clone();\n\t\tthis.$push_post_type_select = $( '#select-post-types' ).clone();\n\t\tthis.$pull_post_type_select = $( '#select-post-types' ).clone();\n\t\tthis.$push_select_backup = $( '#select-backup' ).clone();\n\t\tthis.$pull_select_backup = $( '#select-backup' ).clone();\n\n\t\tthis.spinner_url = window.spinner_url = wpmdb.functions.get_spinner_url();\n\t\tthis.ajax_spinner = window.ajax_spinner = '<img src=\"' + this.spinner_url + '\" alt=\"\" class=\"ajax-spinner general-spinner\" />';\n\t}\n\n\tpad( n, width, z ) {\n\t\tz = z || '0';\n\t\tn = n + '';\n\t\treturn n.length >= width ? n : new Array( width - n.length + 1 ).join( z ) + n;\n\t}\n\n\tis_int( n ) {\n\t\tn = parseInt( n );\n\t\treturn 'number' === typeof n && 0 === n % 1;\n\t}\n\n\tget_intersect( arr1, arr2 ) {\n\t\tvar r = [], o = {}, l = arr2.length, i, v;\n\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\to[ arr2[ i ] ] = true;\n\t\t}\n\t\tl = arr1.length;\n\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\tv = arr1[ i ];\n\t\t\tif ( v in o ) {\n\t\t\t\tr.push( v );\n\t\t\t}\n\t\t}\n\n\t\treturn r;\n\t}\n\n\tpin_replace_url( pin ) {\n\t\tif ( true === pin && 1 > $( '.replace-row.pin' ).length && 1 === $( '#old-url' ).length ) {\n\t\t\t$( '#old-url' ).parents( '.replace-row' ).addClass( 'pin' );\n\t\t}\n\n\t\tif ( false === pin && 0 < $( '.replace-row.pin' ).length ) {\n\t\t\t$( '.replace-row.pin' ).removeClass( 'pin' );\n\t\t}\n\t}\n\n\t/**\n\t * Core plugin wrapper for the common AJAX error detecting method\n\t *\n\t * @param text\n\t * @param code\n\t * @param jqXHR\n\t *\n\t * @returns {string}\n\t */\n\tget_ajax_errors( text, code, jqXHR ) {\n\t\treturn wpmdb.functions.wpmdbGetAjaxErrors( wpmdb_strings.connection_local_server_problem, code, text, jqXHR );\n\t}\n\n\t// updates the debug log when the user switches to the help tab\n\trefresh_debug_log() {\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdb_get_log',\n\t\t\t\tnonce: wpmdb_data.nonces.get_log\n\t\t\t},\n\t\t\terror( jqXHR, textStatus, errorThrown ) {\n\t\t\t\talert( wpmdb_strings.update_log_problem );\n\t\t\t},\n\t\t\tsuccess( data ) {\n\t\t\t\t$( '.debug-log-textarea' ).val( data );\n\t\t\t}\n\t\t} );\n\t}\n\n\tget_query_var( name ) {\n\t\tname = name.replace( /[\\[]/, '\\\\[' ).replace( /[\\]]/, '\\\\]' );\n\t\tvar regex = new RegExp( '[\\\\?&]' + name + '=([^&#]*)' ),\n\t\t\tresults = regex.exec( location.search );\n\t\treturn null === results ? '' : decodeURIComponent( results[ 1 ].replace( /\\+/g, ' ' ) );\n\t}\n\n\tmaybe_show_ssl_warning( url, key, remote_scheme ) {\n\t\tvar scheme = url.substr( 0, url.indexOf( ':' ) );\n\t\tvar $ssl_notice = $( '.ssl-notice' );\n\n\t\tif ( !this.show_ssl_notice ) {\n\t\t\t$ssl_notice.hide();\n\t\t}\n\n\t\tif ( remote_scheme !== scheme && url.indexOf( 'https' ) !== -1 ) {\n\t\t\t$ssl_notice.show();\n\t\t\tthis.show_ssl_notice = true;\n\t\t\turl = url.replace( 'https', 'http' );\n\t\t\t$( '.pull-push-connection-info' ).val( url + '\\n' + key );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.show_ssl_notice = false;\n\t}\n\n\tvalidate_url( url ) {\n\t\treturn /^([a-z]([a-z]|\\d|\\+|-|\\.)*):(\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?((\\[(|(v[\\da-f]{1,}\\.(([a-z]|\\d|-|\\.|_|~)|[!\\$&'\\(\\)\\*\\+,;=]|:)+))\\])|((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=])*)(:\\d*)?)(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*|(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)|((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)|((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)){0})(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i.test( url );\n\t}\n\n\trefresh_table_selects() {\n\t\tif ( undefined !== wpmdb_data && undefined !== wpmdb_data.this_tables && undefined !== wpmdb_data.this_table_sizes_hr ) {\n\t\t\tthis.$push_select = this.create_table_select( wpmdb_data.this_tables, wpmdb_data.this_table_sizes_hr, $( wpmdb.$push_select ).val() );\n\t\t}\n\n\t\tif ( undefined !== wpmdb.common.connection_data && undefined !== wpmdb.common.connection_data.tables && undefined !== wpmdb.common.connection_data.table_sizes_hr ) {\n\t\t\tthis.$pull_select = this.create_table_select( wpmdb.common.connection_data.tables, wpmdb.common.connection_data.table_sizes_hr, $( wpmdb.$pull_select ).val() );\n\t\t}\n\t}\n\n\tsave_active_profile() {\n\t\tvar profile;\n\t\t$( '.save-settings-button' ).blur();\n\n\t\tif ( this.doing_save_profile ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( true === this.maybe_show_select_table_notice() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar create_new_profile = false;\n\n\t\tif ( $( '#create_new' ).is( ':checked' ) ) {\n\t\t\tcreate_new_profile = true;\n\t\t}\n\t\tvar profile_name = $( '.create-new-profile' ).val();\n\n\t\tthis.doing_save_profile = true;\n\t\tprofile = $( $( '#migrate-form' )[ 0 ].elements ).not( '.auth-credentials' ).serialize();\n\n\t\t$( '.save-settings-button' ).attr( 'disabled', 'disabled' )\n\t\t\t.after( '<img src=\"' + this.spinner_url + '\" alt=\"\" class=\"save-profile-ajax-spinner general-spinner\" />' );\n\n\t\tthis.doing_ajax = true;\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdb_save_profile',\n\t\t\t\tprofile: profile,\n\t\t\t\tnonce: wpmdb_data.nonces.save_profile\n\t\t\t},\n\t\t\terror: ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\tthis.doing_ajax = false;\n\t\t\t\talert( wpmdb_strings.save_profile_problem );\n\t\t\t\t$( '.save-settings-button' ).removeAttr( 'disabled' );\n\t\t\t\t$( '.save-profile-ajax-spinner' ).remove();\n\t\t\t\t$( '.save-settings-button' ).after( '<span class=\"ajax-success-msg\">' + wpmdb_strings.saved + '</span>' );\n\t\t\t\t$( '.ajax-success-msg' ).fadeOut( 2000, function() {\n\t\t\t\t\t$( this ).remove();\n\t\t\t\t} );\n\t\t\t\tthis.doing_save_profile = false;\n\t\t\t},\n\t\t\tsuccess: ( data ) => {\n\t\t\t\tvar updated_profile_id = parseInt( $( '#migrate-form input[name=save_migration_profile_option]:checked' ).val(), 10 ) + 1;\n\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t$( '.save-settings-button' ).removeAttr( 'disabled' );\n\t\t\t\t$( '.save-profile-ajax-spinner' ).remove();\n\t\t\t\t$( '.save-settings-button' ).after( '<span class=\"ajax-success-msg\">' + wpmdb_strings.saved + '</span>' );\n\t\t\t\t$( '.ajax-success-msg' ).fadeOut( 2000, function() {\n\t\t\t\t\t$( this ).remove();\n\t\t\t\t} );\n\t\t\t\tthis.doing_save_profile = false;\n\t\t\t\t$( '.create-new-profile' ).val( '' );\n\n\t\t\t\tif ( create_new_profile ) {\n\t\t\t\t\tvar new_profile_key = parseInt( data, 10 );\n\t\t\t\t\tvar new_profile_id = new_profile_key + 1;\n\t\t\t\t\tvar new_li = $( '<li><span class=\"delete-profile\" data-profile-id=\"' + new_profile_id + '\"></span><label for=\"profile-' + new_profile_id + '\"><input id=\"profile-' + new_profile_id + '\" value=\"' + new_profile_key + '\" name=\"save_migration_profile_option\" type=\"radio\"></label></li>' );\n\t\t\t\t\tnew_li.find( 'label' ).append( document.createTextNode( ' ' + profile_name ) );\n\t\t\t\t\tupdated_profile_id = new_profile_id;\n\n\t\t\t\t\t$( '#create_new' ).parents( 'li' ).before( new_li );\n\t\t\t\t\t$( '#profile-' + new_profile_id ).attr( 'checked', 'checked' );\n\t\t\t\t}\n\n\t\t\t\t// Push updated profile id to history if available\n\t\t\t\tvar updated_url = window.location.href.replace( '#migrate', '' ).replace( /&wpmdb-profile=-?\\d+/, '' ) + '&wpmdb-profile=' + updated_profile_id;\n\t\t\t\tvar updated_profile_name = $( '#migrate-form input[name=save_migration_profile_option]:checked' ).parent().text().trim();\n\n\t\t\t\tif ( 'function' === typeof window.history.pushState ) {\n\t\t\t\t\tif ( $( '#migrate-form .crumbs' ).length ) {\n\t\t\t\t\t\t$( '#migrate-form .crumbs .crumb:last' ).text( updated_profile_name );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar $crumbs = $( '<div class=\"crumbs\" />' )\n\t\t\t\t\t\t\t.append( '<a class=\"crumb\" href=\"' + wpmdb_data.this_plugin_base + '\"> Saved Profiles </a>' )\n\t\t\t\t\t\t\t.append( '<span class=\"crumb\">' + updated_profile_name + '</span>' );\n\t\t\t\t\t\t$( '#migrate-form' ).prepend( $crumbs );\n\t\t\t\t\t}\n\t\t\t\t\twindow.history.pushState( { updated_profile_id: updated_profile_id }, null, updated_url );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tcancel_migration( event ) {\n\t\tthis.migration_cancelled = true;\n\t\tthis.cancelling_text = wpmdb_strings.cancelling_migration;\n\t\t$( '.migration-controls' ).css( { visibility: 'hidden' } );\n\n\t\tif ( 'find_replace' === this.migration_intent ) {\n\t\t\tthis.cancelling_text = wpmdb_strings.cancelling_find_replace;\n\t\t}\n\n\t\twpmdb.current_migration.setState( this.cancelling_text, wpmdb_strings.completing_current_request, 'cancelling' );\n\n\t\tif ( true === this.migration_paused ) {\n\t\t\tthis.migration_paused = false;\n\t\t\twpmdb.functions.execute_next_step();\n\t\t}\n\t}\n\n\t/**\n\t * Set checkbox\n\t *\n\t * @param string checkbox_wrap\n\t */\n\tset_checkbox( checkbox_wrap ) {\n\t\tconst $switch = $( '#' + checkbox_wrap );\n\t\tvar $checkbox = $switch.find( 'input[type=checkbox]' );\n\n\t\t$switch.toggleClass( 'on' ).find( 'span' ).toggleClass( 'checked' );\n\t\tvar switch_on = $switch.find( 'span.on' ).hasClass( 'checked' );\n\t\t$checkbox.attr( 'checked', switch_on ).trigger( 'change' );\n\t}\n\n\t// save file (export) / push / pull special conditions\n\tmove_connection_info_box() {\n\t\tvar $connection_status = $( '.connection-status' );\n\t\tvar $directory_permission_notice = $( '.directory-permission-notice' );\n\t\tvar $compatibility_older_mysql = $( '.compatibility-older-mysql' );\n\t\tvar $mst_required = $( '.mst-required' );\n\t\tvar $keep_active_plugins = $( '.keep-active-plugins' );\n\t\tvar $step_two = $( '.step-two' );\n\t\tvar $backup_options = $( '.backup-options' );\n\t\tvar new_migration_type = wpmdb.functions.wpmdb_migration_type();\n\t\tvar profile_name, table_prefix, backup_table_prefix, uploads_dir, upload_dir_long, write_permission;\n\n\t\t$connection_status.hide();\n\t\t$directory_permission_notice.hide();\n\t\t$step_two.show();\n\t\t$backup_options.show();\n\t\t$keep_active_plugins.show();\n\t\t$compatibility_older_mysql.hide();\n\t\t$mst_required.hide();\n\n\t\twpmdb.functions.wpmdb_toggle_migration_action_text();\n\n\t\t$( '.migrate-tab' ).attr( 'class', 'migrate-tab content-tab' ).addClass( wpmdb.functions.wpmdb_migration_type() );\n\n\t\t$.wpmdb.do_action( 'move_connection_info_box', {\n\t\t\tmigration_type: new_migration_type,\n\t\t\tlast_migration_type: this.last_replace_switch\n\t\t} );\n\n\t\tif ( -1 !== $.inArray( new_migration_type, [ 'push', 'pull' ] ) ) {\n\t\t\tvar $pull_push_connection_info = $( '.pull-push-connection-info' );\n\t\t\tvar connection_info = $.trim( $pull_push_connection_info.val() ).split( '\\n' );\n\t\t\tvar $migration_list_li = $( '.' + new_migration_type + '-list li' );\n\n\t\t\t$migration_list_li.append( this.$connection_info_box );\n\t\t\tthis.$connection_info_box.show( function() {\n\t\t\t\tvar connection_textarea = $( this ).find( '.pull-push-connection-info' );\n\t\t\t\tif ( !connection_textarea.val() ) {\n\t\t\t\t\tconnection_textarea.focus();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Reconnect if the migration type was just changed\n\t\t\tif ( new_migration_type !== this.last_replace_switch && 2 === connection_info.length ) {\n\t\t\t\twpmdb.force_reconnect = true;\n\t\t\t\t$migration_list_li.append( this.$connection_info_box );\n\t\t\t\t$pull_push_connection_info.removeClass( 'temp-disabled' ).attr( 'readonly', 'readonly' );\n\t\t\t\t$( '.connect-button' ).hide();\n\t\t\t\twpmdb.functions.connection_box_changed();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.connection_established ) {\n\t\t\t\t$connection_status.hide();\n\t\t\t\t$step_two.show();\n\n\t\t\t\twpmdb.functions.wpmdb_toggle_migration_action_text();\n\n\t\t\t\tif ( 'pull' === new_migration_type ) {\n\t\t\t\t\ttable_prefix = wpmdb.common.connection_data.prefix;\n\t\t\t\t\tbackup_table_prefix = wpmdb_data.site_details.prefix;\n\t\t\t\t\tuploads_dir = wpmdb_data.this_uploads_dir;\n\t\t\t\t\tupload_dir_long = wpmdb_data.this_upload_dir_long;\n\t\t\t\t\twrite_permission = wpmdb_data.write_permission;\n\t\t\t\t} else {\n\t\t\t\t\ttable_prefix = wpmdb_data.this_prefix;\n\t\t\t\t\tbackup_table_prefix = wpmdb.common.connection_data.prefix;\n\t\t\t\t\tuploads_dir = wpmdb.common.connection_data.uploads_dir;\n\t\t\t\t\tupload_dir_long = wpmdb.common.connection_data.upload_dir_long;\n\t\t\t\t\twrite_permission = wpmdb.common.connection_data.write_permissions;\n\t\t\t\t}\n\n\t\t\t\t$( '.table_prefix' ).html( table_prefix );\n\t\t\t\t$( '.backup-table-prefix' ).html( backup_table_prefix );\n\t\t\t\t$( '.uploads-dir' ).html( uploads_dir );\n\n\t\t\t\tthis.maybe_show_backup_disabled_msg( upload_dir_long, write_permission );\n\n\t\t\t\tif ( false === this.profile_name_edited ) {\n\t\t\t\t\tprofile_name = this.get_domain_name( wpmdb.common.connection_data.url );\n\t\t\t\t\t$( '.create-new-profile' ).val( profile_name );\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t$connection_status.show();\n\t\t\t\t$step_two.hide();\n\t\t\t}\n\n\t\t} else if ( -1 !== $.inArray( new_migration_type, [ 'find_replace', 'savefile' ] ) ) {\n\t\t\t$connection_status.hide();\n\t\t\t$step_two.show();\n\t\t\t$( '.table-prefix' ).html( wpmdb_data.this_prefix );\n\t\t\tif ( false === this.profile_name_edited ) {\n\t\t\t\t$( '.create-new-profile' ).val( '' );\n\t\t\t}\n\n\t\t\t$keep_active_plugins.hide();\n\n\t\t\tif ( 'savefile' === new_migration_type ) {\n\t\t\t\t$backup_options.hide();\n\t\t\t\t$compatibility_older_mysql.show();\n\n\t\t\t\tif ( 'false' === wpmdb_data.write_permission ) {\n\t\t\t\t\t$directory_permission_notice.show();\n\t\t\t\t\t$step_two.hide();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ( 'true' === wpmdb_data.is_multisite ) {\n\t\t\t\t\tvar $old_replace_col = $( '.old-replace-col' ).eq( 1 );\n\t\t\t\t\t$old_replace_col.parent().removeClass( 'pin' ).find( '.replace-remove-row' ).show();\n\t\t\t\t\t$old_replace_col.find( 'input' ).removeAttr( 'readonly' );\n\t\t\t\t}\n\n\t\t\t\tthis.maybe_show_backup_disabled_msg( wpmdb_data.this_upload_dir_long, wpmdb_data.write_permission );\n\t\t\t}\n\t\t}\n\n\t\tthis.maybe_show_mixed_cased_table_name_warning();\n\t}\n\n\tmaybe_show_backup_disabled_msg( upload_dir, write_permission ) {\n\t\tvar $create_backup = $( '#create-backup' );\n\t\tvar $create_backup_label = $( '#create-backup-label' );\n\t\tvar $backup_option_disabled = $( '.backup-option-disabled' );\n\n\t\t$create_backup.removeAttr( 'disabled' );\n\t\t$create_backup_label.removeClass( 'disabled' );\n\t\t$backup_option_disabled.hide();\n\n\t\tif ( 'false' === write_permission ) {\n\t\t\t$create_backup.prop( 'checked', false );\n\t\t\t$create_backup.attr( 'disabled', 'disabled' );\n\t\t\t$create_backup_label.addClass( 'disabled' );\n\t\t\t$backup_option_disabled.show();\n\t\t\t$( '.upload-directory-location' ).html( upload_dir );\n\t\t}\n\t}\n\n\tchange_replace_values() {\n\t\tvar old_url = null;\n\t\tvar old_path = null;\n\t\tif ( null !== wpmdb.common.previous_connection_data && 'object' === typeof wpmdb.common.previous_connection_data && wpmdb.common.previous_connection_data.url !== wpmdb.common.connection_data.url ) {\n\t\t\told_url = this.remove_protocol( wpmdb.common.previous_connection_data.url );\n\t\t\told_path = wpmdb.common.previous_connection_data.path;\n\t\t}\n\n\t\tif ( 'push' === wpmdb.functions.wpmdb_migration_type() || 'savefile' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\tif ( 'pull' === this.last_replace_switch ) {\n\t\t\t\t$( '.replace-row' ).each( function() {\n\t\t\t\t\tvar old_val = $( '.old-replace-col input', this ).val();\n\t\t\t\t\t$( '.old-replace-col input', this ).val( $( '.replace-right-col input', this ).val() );\n\t\t\t\t\t$( '.replace-right-col input', this ).val( old_val );\n\t\t\t\t} );\n\t\t\t} else if ( 'push' === this.last_replace_switch && 'push' === wpmdb.functions.wpmdb_migration_type() && null !== old_url && null !== old_path ) {\n\t\t\t\t$( '.replace-row' ).each( function() {\n\t\t\t\t\tvar old_val = $( '.replace-right-col input', this ).val();\n\t\t\t\t\tif ( old_val === old_path ) {\n\t\t\t\t\t\t$( '.replace-right-col input', this ).val( wpmdb.common.connection_data.path );\n\t\t\t\t\t}\n\t\t\t\t\tif ( old_val === old_url ) {\n\t\t\t\t\t\t$( '.replace-right-col input', this ).val( this.remove_protocol( wpmdb.common.connection_data.url ) );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$.wpmdb.do_action( 'wpmdb_update_push_table_select' );\n\t\t\t$( '#select-post-types' ).remove();\n\t\t\t$( '.exclude-post-types-warning' ).after( this.$push_post_type_select );\n\t\t\twpmdb.functions.exclude_post_types_warning();\n\t\t\t$( '#select-backup' ).remove();\n\t\t\t$( '.backup-tables-wrap' ).prepend( this.$push_select_backup );\n\t\t} else if ( 'pull' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\tif ( '' === this.last_replace_switch || 'push' === this.last_replace_switch || 'savefile' === this.last_replace_switch ) {\n\t\t\t\t$( '.replace-row' ).each( function() {\n\t\t\t\t\tvar old_val = $( '.old-replace-col input', this ).val();\n\t\t\t\t\t$( '.old-replace-col input', this ).val( $( '.replace-right-col input', this ).val() );\n\t\t\t\t\t$( '.replace-right-col input', this ).val( old_val );\n\t\t\t\t} );\n\t\t\t} else if ( 'pull' === this.last_replace_switch && 'pull' === wpmdb.functions.wpmdb_migration_type() && null !== old_url && null !== old_path ) {\n\t\t\t\t$( '.replace-row' ).each( function() {\n\t\t\t\t\tvar old_val = $( '.old-replace-col input', this ).val();\n\t\t\t\t\tif ( old_val === old_path ) {\n\t\t\t\t\t\t$( '.old-replace-col input', this ).val( wpmdb.common.connection_data.path );\n\t\t\t\t\t}\n\t\t\t\t\tif ( old_val === old_url ) {\n\t\t\t\t\t\t$( '.old-replace-col input', this ).val( this.remove_protocol( wpmdb.common.connection_data.url ) );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$.wpmdb.do_action( 'wpmdb_update_pull_table_select' );\n\t\t\t$( '#select-post-types' ).remove();\n\t\t\t$( '.exclude-post-types-warning' ).after( this.$pull_post_type_select );\n\t\t\twpmdb.functions.exclude_post_types_warning();\n\t\t\t$( '#select-backup' ).remove();\n\t\t\t$( '.backup-tables-wrap' ).prepend( this.$pull_select_backup );\n\t\t}\n\t\tthis.last_replace_switch = wpmdb.functions.wpmdb_migration_type();\n\t}\n\n\tswitch_to_plugin_tab( hash, skip_addons_check ) {\n\t\t$( '.nav-tab' ).removeClass( 'nav-tab-active' );\n\t\t$( '.nav-tab.' + hash ).addClass( 'nav-tab-active' );\n\t\t$( '.content-tab' ).hide();\n\t\t$( '.' + hash + '-tab' ).show();\n\n\t\tif ( 'settings' === hash ) {\n\t\t\tif ( true === this.should_check_licence() ) {\n\t\t\t\t$( 'p.licence-status' ).append( 'Checking License... ' ).append( this.ajax_spinner );\n\t\t\t\tthis.check_licence();\n\t\t\t}\n\t\t}\n\n\t\tif ( 'help' === hash ) {\n\t\t\tthis.refresh_debug_log();\n\t\t\tif ( true === this.should_check_licence() ) {\n\t\t\t\t$( '.support-content p' ).append( this.ajax_spinner );\n\t\t\t\tthis.check_licence();\n\t\t\t}\n\t\t}\n\n\t\tif ( 'addons' === hash && true !== skip_addons_check ) {\n\t\t\tif ( true === this.should_check_licence() ) {\n\t\t\t\t$( '.addons-content p' ).append( this.ajax_spinner );\n\t\t\t\tthis.check_licence();\n\t\t\t}\n\t\t}\n\t}\n\n\thide_overlay() {\n\t\t$( '#overlay' ).removeClass( 'show' ).addClass( 'hide' );\n\t\t$( '#overlay > div' ).removeClass( 'show' ).addClass( 'hide' );\n\t\twpmdb.current_migration.$proVersion.find( 'iframe' ).remove();\n\t\tsetTimeout( function() {\n\t\t\t$( '#overlay' ).remove();\n\t\t}, 500 );\n\t\tthis.migration_completed = false;\n\t}\n\n\tcheck_licence( licence ) {\n\t\tvar update_licence_content = !this.doing_licence_registration_ajax;\n\t\tthis.checked_licence = true;\n\t\tlet self = this;\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdb_check_licence',\n\t\t\t\tlicence: licence,\n\t\t\t\tcontext: 'all',\n\t\t\t\tnonce: wpmdb_data.nonces.check_licence\n\t\t\t},\n\t\t\terror( jqXHR, textStatus, errorThrown ) {\n\t\t\t\talert( wpmdb_strings.license_check_problem );\n\t\t\t},\n\t\t\tsuccess( data ) {\n\n\t\t\t\tvar $support_content = $( '.support-content' );\n\t\t\t\tvar $addons_content = $( '.addons-content' );\n\t\t\t\tvar $licence_content = $( '.licence-status:not(.notification-message)' );\n\t\t\t\tvar licence_msg, support_msg, addons_msg;\n\n\t\t\t\tif ( 'undefined' !== typeof data.dbrains_api_down ) {\n\t\t\t\t\tsupport_msg = data.dbrains_api_down + data.message;\n\t\t\t\t\taddons_msg = data.dbrains_api_down;\n\t\t\t\t} else if ( 'undefined' !== typeof data.errors ) {\n\n\t\t\t\t\tif ( 'undefined' !== typeof data.errors.subscription_expired ) {\n\t\t\t\t\t\tlicence_msg = data.errors.subscription_expired.licence;\n\t\t\t\t\t\tsupport_msg = data.errors.subscription_expired.support;\n\t\t\t\t\t\taddons_msg = data.errors.subscription_expired.addons;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar msg = '';\n\t\t\t\t\t\tfor ( var key in data.errors ) {\n\t\t\t\t\t\t\tmsg += data.errors[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsupport_msg = msg;\n\t\t\t\t\t\taddons_msg = msg;\n\t\t\t\t\t}\n\t\t\t\t\tif ( 'undefined' !== typeof data.addon_content ) {\n\t\t\t\t\t\taddons_msg += '\\n' + data.addon_content;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsupport_msg = data.message;\n\t\t\t\t\taddons_msg = data.addon_content;\n\t\t\t\t}\n\n\t\t\t\tif ( update_licence_content ) {\n\t\t\t\t\t$licence_content.stop().fadeOut( self.fade_duration, function() {\n\t\t\t\t\t\tif ( 'undefined' === typeof licence_msg ) {\n\t\t\t\t\t\t\t$( this ).css( { visibility: 'hidden', display: 'block' } ).slideUp();\n\t\t\t\t\t\t\tlicence_msg = '';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$( this )\n\t\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t\t.html( licence_msg )\n\t\t\t\t\t\t\t.stop()\n\t\t\t\t\t\t\t.fadeIn( self.fade_duration );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t$support_content.stop().fadeOut( self.fade_duration, function() {\n\t\t\t\t\t$( this )\n\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t.html( support_msg )\n\t\t\t\t\t\t.stop()\n\t\t\t\t\t\t.fadeIn( self.fade_duration );\n\t\t\t\t} );\n\t\t\t\t$addons_content.stop().fadeOut( self.fade_duration, function() {\n\t\t\t\t\t$( this )\n\t\t\t\t\t\t.empty()\n\t\t\t\t\t\t.html( addons_msg )\n\t\t\t\t\t\t.stop()\n\t\t\t\t\t\t.fadeIn( self.fade_duration );\n\t\t\t\t} );\n\n\t\t\t\tif ( $( '#plugin-compatibility' ).is( ':not(:checked)' ) ) {\n\t\t\t\t\t$( '#compatibility-header' ).click();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tshould_check_licence() {\n\t\treturn false === this.checked_licence && '1' === wpmdb_data.has_licence && 'true' === wpmdb_data.is_pro;\n\t}\n\n\tmaybe_show_mixed_cased_table_name_warning() {\n\t\tif ( 'undefined' === typeof wpmdb.common.connection_data || false === wpmdb.common.connection_data ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar migration_intent = wpmdb.functions.wpmdb_migration_type();\n\t\tvar tables_to_migrate = wpmdb.functions.get_tables_to_migrate( null, null );\n\n\t\t$( '.mixed-case-table-name-notice' ).hide();\n\n\t\tif ( null === tables_to_migrate ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttables_to_migrate = tables_to_migrate.join( '' );\n\n\t\t// The table names are all lowercase, no need to display the warning.\n\t\tif ( tables_to_migrate === tables_to_migrate.toLowerCase() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\t * Do not display the warning if the remote lower_case_table_names does not equal \"1\" (i.e the only problematic setting)\n\t\t * Applies to push/export migrations.\n\t\t */\n\t\tif ( '1' !== wpmdb.common.connection_data.lower_case_table_names && ('push' === migration_intent || 'savefile' === migration_intent) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\t * Do not display the warning if the local lower_case_table_names does not equal \"1\" (i.e the only problematic setting)\n\t\t * Only applies to pull migrations.\n\t\t */\n\t\tif ( '1' !== wpmdb_data.lower_case_table_names && 'pull' === migration_intent ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\t * At this stage we've determined:\n\t\t * 1. The source database contains at least one table that contains an uppercase character.\n\t\t * 2. The destination environment has lower_case_table_names set to 1.\n\t\t * 3. The source database table containing the uppercase letter will be converted to lowercase during the migration.\n\t\t */\n\n\t\tif ( 'push' === migration_intent || 'savefile' === migration_intent ) {\n\t\t\t$( '.mixed-case-table-name-notice.push' ).show();\n\t\t} else {\n\t\t\t$( '.mixed-case-table-name-notice.pull' ).show();\n\t\t}\n\t}\n\n\tenable_pro_licence( data, licence_key ) {\n\t\t$( '.licence-input, .register-licence' ).remove();\n\t\t$( '.licence-not-entered' ).prepend( data.masked_licence );\n\t\t$( '.support-content' ).empty().html( '<p>' + wpmdb_strings.fetching_license + '<img src=\"' + this.spinner_url + '\" alt=\"\" class=\"ajax-spinner general-spinner\" /></p>' );\n\t\tthis.check_licence( licence_key );\n\n\t\t$( '.migrate-selection label' ).removeClass( 'disabled' );\n\t\t$( '.migrate-selection input' ).removeAttr( 'disabled' );\n\t}\n\n\tget_domain_name( url ) {\n\t\tvar temp_url = url;\n\t\tvar domain = temp_url.replace( /\\/\\/(.*)@/, '//' ).replace( 'http://', '' ).replace( 'https://', '' ).replace( 'www.', '' );\n\t\treturn domain;\n\t}\n\n\tupdate_domain_placeholder( label, url, stage ) {\n\t\tvar domain = this.get_domain_name( url );\n\n\t\tif ( 'completed' === stage ) {\n\t\t\treturn label.replace( /\\%s\\s?/, '<span class=domain-label>' + domain + '</span>&nbsp;' );\n\t\t}\n\n\t\treturn label.replace( /\\%s(\\S*)\\s?/, '<span class=domain-label>' + domain + '$1</span>&nbsp;' );\n\t}\n\n\tget_migration_status_label( url, intent, stage ) {\n\t\tvar migrating_stage_label = '';\n\t\tvar completed_stage_label = '';\n\n\t\tswitch ( intent ) {\n\t\t\tcase 'push':\n\t\t\t\tmigrating_stage_label = wpmdb_strings.push_migration_label_migrating;\n\t\t\t\tcompleted_stage_label = wpmdb_strings.push_migration_label_completed;\n\t\t\t\tbreak;\n\t\t\tcase 'pull':\n\t\t\t\tmigrating_stage_label = wpmdb_strings.pull_migration_label_migrating;\n\t\t\t\tcompleted_stage_label = wpmdb_strings.pull_migration_label_completed;\n\t\t\t\tbreak;\n\t\t\tcase 'find_replace':\n\t\t\t\tmigrating_stage_label = wpmdb_strings.find_replace_label_migrating;\n\t\t\t\tcompleted_stage_label = wpmdb_strings.find_replace_label_completed;\n\t\t\t\tbreak;\n\t\t\tcase 'savefile':\n\t\t\t\tmigrating_stage_label = wpmdb_strings.exporting_please_wait;\n\t\t\t\tcompleted_stage_label = wpmdb_strings.exporting_complete;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tvar label = migrating_stage_label;\n\n\t\tif ( 'completed' === stage ) {\n\t\t\tlabel = completed_stage_label;\n\t\t}\n\n\t\tif ( 'push' === intent || 'pull' === intent ) {\n\t\t\tlabel = this.update_domain_placeholder( label, url, stage );\n\t\t}\n\n\t\tlabel = $.wpmdb.apply_filters( 'wpmdb_get_migration_status_label', label, {\n\t\t\tintent: intent,\n\t\t\tstage: stage\n\t\t} );\n\n\t\treturn label;\n\t}\n\n\tdisable_export_type_controls() {\n\t\t$( '.option-group' ).each( function( index ) {\n\t\t\t$( 'input', this ).attr( 'disabled', 'disabled' );\n\t\t\t$( 'label', this ).css( 'cursor', 'default' );\n\t\t} );\n\t}\n\n\tenable_export_type_controls() {\n\t\t$( '.option-group' ).each( function( index ) {\n\t\t\t$( 'input', this ).removeAttr( 'disabled' );\n\t\t\t$( 'label', this ).css( 'cursor', 'pointer' );\n\t\t} );\n\t}\n\n\tset_slider_value( parent_selector, value, unit, display ) {\n\t\tvar display_value = value;\n\n\t\tif ( undefined !== display ) {\n\t\t\tdisplay_value = display;\n\t\t}\n\n\t\t$( '.slider', parent_selector ).slider( 'value', parseInt( value ) );\n\t\t$( '.amount', parent_selector ).html( wpmdb.functions.wpmdb_add_commas( display_value ) + ' ' + unit );\n\t}\n\n\tset_pause_resume_button( event, instance ) {\n\t\tif ( true === this.migration_paused ) {\n\t\t\tthis.migration_paused = false;\n\t\t\tthis.doing_ajax = true;\n\n\t\t\twpmdb.current_migration.setState( this.previous_progress_title, this.previous_progress_text_primary, 'active' );\n\t\t\t$( '.pause-resume' ).html( wpmdb_strings.pause );\n\n\t\t\t// Resume the timer\n\t\t\twpmdb.current_migration.resumeTimer();\n\n\t\t\twpmdb.functions.execute_next_step( instance );\n\t\t} else {\n\t\t\tthis.migration_paused = true;\n\t\t\tthis.doing_ajax = false;\n\t\t\tthis.paused_text = wpmdb_strings.migration_paused;\n\t\t\tthis.previous_progress_title = $( '.progress-title' ).html();\n\t\t\tthis.previous_progress_text_primary = $( '.progress-text', '.progress-wrapper-primary' ).html();\n\t\t\tthis.previous_progress_text_secondary = $( '.progress-text', '.progress-wrapper-secondary ' ).html();\n\n\t\t\tif ( 'find_replace' === this.migration_intent ) {\n\t\t\t\tthis.paused_text = wpmdb_strings.find_replace_paused;\n\t\t\t}\n\n\t\t\twpmdb.current_migration.setState( this.paused_text, wpmdb_strings.completing_current_request, null );\n\t\t\t$( 'body' ).off( 'click', '.pause-resume' ); // Is re-bound at execute_next_step when migration is finally paused\n\t\t\t$( 'body' ).off( 'click', '.cancel' ); // Is re-bound at execute_next_step when migration is finally paused\n\t\t}\n\t}\n\n\t/**\n\t * Filter temporary tables out of wpmdb.functions.create_table_select().\n\t *\n\t * @param exclude\n\t * @param table_name\n\t * @returns {bool}\n\t */\n\tfilter_temp_tables( exclude, table_name ) {\n\t\tvar temp_prefix = wpmdb_data.this_temp_prefix;\n\n\t\tif ( 'pull' === wpmdb.functions.wpmdb_migration_type() && 'undefined' !== typeof wpmdb.common.connection_data && 'undefined' !== typeof wpmdb.common.connection_data.temp_prefix ) {\n\t\t\ttemp_prefix = wpmdb.common.connection_data.temp_prefix;\n\t\t}\n\n\t\tif ( temp_prefix === table_name.substring( 0, temp_prefix.length ) ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn exclude;\n\t}\n\n\tget_table_prefix( value, args ) {\n\t\treturn $( '.table-select-wrap .table-prefix' ).text();\n\t}\n\n\tlock_replace_url( lock ) {\n\t\tif ( true === lock ) {\n\t\t\t$( '.replace-row.pin .replace-right-col input[type=\"text\"]' ).attr( 'readonly', 'readonly' );\n\t\t\t$( '.replace-row.pin .arrow-col' ).addClass( 'disabled' );\n\t\t} else {\n\t\t\t$( '.replace-row.pin .replace-right-col input[type=\"text\"]' ).removeAttr( 'readonly' );\n\t\t\t$( '.replace-row.pin .arrow-col' ).removeClass( 'disabled' );\n\t\t}\n\t}\n\n\tset_connection_data( data ) {\n\t\twindow.wpmdb.common.previous_connection_data = wpmdb.common.connection_data;\n\t\twindow.wpmdb.common.connection_data = data;\n\t\t$.wpmdb.do_action( 'wpmdb_connection_data_updated', data );\n\t}\n\n\t/**\n\t * Returns formatted info for the Max Request Size slider.\n\t *\n\t * @param value\n\t * @return object\n\t */\n\tget_max_request_display_info( value ) {\n\t\tvar display_info = {};\n\n\t\tdisplay_info.unit = 'MB';\n\t\tdisplay_info.amount = (value / 1024).toFixed( 2 );\n\n\t\treturn display_info;\n\t}\n\n\testablish_remote_connection_from_saved_profile() {\n\t\tvar action = wpmdb.functions.wpmdb_migration_type();\n\t\tvar connection_info = $.trim( $( '.pull-push-connection-info' ).val() ).split( '\\n' );\n\t\tif ( 'undefined' === typeof wpmdb_default_profile ||\n\t\t     true === wpmdb_default_profile ||\n\t\t     'savefile' === action ||\n\t\t     'find_replace' === action ||\n\t\t     'import' === action ||\n\t\t     this.doing_ajax ||\n\t\t     !wpmdb_data.is_pro ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.doing_ajax = true;\n\t\tthis.disable_export_type_controls();\n\n\t\t$( '.connection-status' ).html( wpmdb_strings.establishing_remote_connection );\n\t\t$( '.connection-status' ).removeClass( 'notification-message error-notice migration-error' );\n\t\t$( '.connection-status' ).append( this.ajax_spinner );\n\n\t\tvar intent = wpmdb.functions.wpmdb_migration_type();\n\t\t// Hack to keep object scope\n\t\tconst self = this;\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdb_verify_connection_to_remote_site',\n\t\t\t\turl: connection_info[ 0 ],\n\t\t\t\tkey: connection_info[ 1 ],\n\t\t\t\tintent: intent,\n\t\t\t\tnonce: wpmdb_data.nonces.verify_connection_to_remote_site,\n\t\t\t\tconvert_post_type_selection: wpmdb_convert_post_type_selection,\n\t\t\t\tprofile: wpmdb_data.profile\n\t\t\t},\n\t\t\terror( jqXHR, textStatus, errorThrown ){\n\t\t\t\t$( '.connection-status' ).html( self.get_ajax_errors( jqXHR.responseText, '(#102)', jqXHR ) );\n\t\t\t\t$( '.connection-status' ).addClass( 'notification-message error-notice migration-error' );\n\t\t\t\t$( '.ajax-spinner' ).remove();\n\t\t\t\tself.doing_ajax = false;\n\t\t\t\tself.enable_export_type_controls();\n\t\t\t},\n\t\t\tsuccess( data ) {\n\t\t\t\t$( '.ajax-spinner' ).remove();\n\t\t\t\tself.doing_ajax = false;\n\t\t\t\tself.enable_export_type_controls();\n\n\t\t\t\tif ( 'undefined' !== typeof data.wpmdb_error && 1 === data.wpmdb_error ) {\n\t\t\t\t\t$( '.connection-status' ).html( data.body );\n\t\t\t\t\t$( '.connection-status' ).addClass( 'notification-message error-notice migration-error' );\n\n\t\t\t\t\tif ( data.body.indexOf( '401 Unauthorized' ) > -1 ) {\n\t\t\t\t\t\t$( '.basic-access-auth-wrapper' ).show();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( true === self.maybe_show_mst_warning( data ) ) {\n\t\t\t\t\t$( '.connection-status' ).hide();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tself.maybe_show_ssl_warning( connection_info[ 0 ], connection_info[ 1 ], data.scheme );\n\t\t\t\twpmdb.functions.maybe_show_prefix_notice( data.prefix );\n\n\t\t\t\t$( '.pull-push-connection-info' ).addClass( 'temp-disabled' );\n\t\t\t\t$( '.pull-push-connection-info' ).attr( 'readonly', 'readonly' );\n\t\t\t\t$( '.connect-button' ).hide();\n\n\t\t\t\t$( '.connection-status' ).hide();\n\t\t\t\t$( '.step-two' ).show();\n\t\t\t\tself.connection_established = true;\n\t\t\t\tself.set_connection_data( data );\n\t\t\t\tself.move_connection_info_box();\n\n\t\t\t\tself.maybe_show_mixed_cased_table_name_warning();\n\n\t\t\t\tvar loaded_tables = '';\n\t\t\t\tif ( false === wpmdb_default_profile && 'undefined' !== typeof wpmdb_loaded_tables ) {\n\t\t\t\t\tloaded_tables = wpmdb_loaded_tables;\n\t\t\t\t}\n\n\t\t\t\tself.$pull_select = wpmdb.functions.create_table_select( wpmdb.common.connection_data.tables, wpmdb.common.connection_data.table_sizes_hr, loaded_tables );\n\t\t\t\tvar loaded_post_types = '';\n\t\t\t\tif ( false === wpmdb_default_profile && 'undefined' !== typeof wpmdb_loaded_post_types ) {\n\t\t\t\t\tif ( 'undefined' !== typeof data.select_post_types ) {\n\t\t\t\t\t\t$( '#exclude-post-types' ).attr( 'checked', 'checked' );\n\t\t\t\t\t\t$( '.post-type-select-wrap' ).show();\n\t\t\t\t\t\tloaded_post_types = data.select_post_types;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tloaded_post_types = wpmdb_loaded_post_types;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar $post_type_select = document.createElement( 'select' );\n\t\t\t\t$( $post_type_select ).attr( {\n\t\t\t\t\tmultiple: 'multiple',\n\t\t\t\t\tname: 'select_post_types[]',\n\t\t\t\t\tid: 'select-post-types',\n\t\t\t\t\tclass: 'multiselect'\n\t\t\t\t} );\n\n\t\t\t\t$.each( wpmdb.common.connection_data.post_types, function( index, value ) {\n\t\t\t\t\tvar selected = $.inArray( value, loaded_post_types );\n\t\t\t\t\tif ( -1 !== selected || (true === wpmdb_convert_exclude_revisions && 'revision' !== value) ) {\n\t\t\t\t\t\tselected = ' selected=\"selected\" ';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected = ' ';\n\t\t\t\t\t}\n\t\t\t\t\t$( $post_type_select ).append( '<option' + selected + 'value=\"' + value + '\">' + value + '</option>' );\n\t\t\t\t} );\n\n\t\t\t\tself.$pull_post_type_select = $post_type_select;\n\n\t\t\t\tvar loaded_tables_backup = '';\n\t\t\t\tif ( false === wpmdb_default_profile && 'undefined' !== typeof wpmdb_loaded_tables_backup ) {\n\t\t\t\t\tloaded_tables_backup = wpmdb_loaded_tables_backup;\n\t\t\t\t}\n\n\t\t\t\tvar $table_select_backup = document.createElement( 'select' );\n\t\t\t\t$( $table_select_backup ).attr( {\n\t\t\t\t\tmultiple: 'multiple',\n\t\t\t\t\tname: 'select_backup[]',\n\t\t\t\t\tid: 'select-backup',\n\t\t\t\t\tclass: 'multiselect'\n\t\t\t\t} );\n\n\t\t\t\t$.each( wpmdb.common.connection_data.tables, function( index, value ) {\n\t\t\t\t\tvar selected = $.inArray( value, loaded_tables_backup );\n\t\t\t\t\tif ( -1 !== selected ) {\n\t\t\t\t\t\tselected = ' selected=\"selected\" ';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselected = ' ';\n\t\t\t\t\t}\n\t\t\t\t\t$( $table_select_backup ).append( '<option' + selected + 'value=\"' + value + '\">' + value + ' (' + wpmdb.common.connection_data.table_sizes_hr[ value ] + ')</option>' );\n\t\t\t\t} );\n\n\t\t\t\tself.$push_select_backup = $table_select_backup;\n\n\t\t\t\tif ( 'pull' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\t\t\t$.wpmdb.do_action( 'wpmdb_update_pull_table_select' );\n\t\t\t\t\t$( '#select-post-types' ).remove();\n\t\t\t\t\t$( '.exclude-post-types-warning' ).after( self.$pull_post_type_select );\n\t\t\t\t\t$( '#select-backup' ).remove();\n\t\t\t\t\t$( '.backup-tables-wrap' ).prepend( self.$pull_select_backup );\n\t\t\t\t\t$( '.table-prefix' ).html( data.prefix );\n\t\t\t\t\t$( '.uploads-dir' ).html( wpmdb_data.this_uploads_dir );\n\t\t\t\t} else {\n\t\t\t\t\t$( '#select-backup' ).remove();\n\t\t\t\t\t$( '.backup-tables-wrap' ).prepend( self.$push_select_backup );\n\t\t\t\t}\n\n\t\t\t\t$.wpmdb.do_action( 'verify_connection_to_remote_site', wpmdb.common.connection_data );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Main method that shows migration progress in the UI\n\t * @param current_row\n\t * @param primary_keys\n\t * @param iterator\n\t */\n\tmigrate_table_recursive( current_row, primary_keys, iterator ) {\n\t\tlet i = iterator || 0;\n\n\t\tif ( i >= this.tables_to_migrate.length ) {\n\n\t\t\tif ( 'upload' === this.stage && wpmdb.current_migration.model.getStageItems( 'find_replace' ).length ) {\n\t\t\t\tthis.stage = 'find_replace';\n\t\t\t\tthis.tables_to_migrate = wpmdb.current_migration.model.getStageItems( 'find_replace', 'name' );\n\t\t\t\tthis.tables_to_migrate = this.tables_to_migrate.map( function( table ) {\n\t\t\t\t\treturn '_mig_' + table;\n\t\t\t\t} );\n\t\t\t\ti = 0;\n\t\t\t} else if ( 'backup' === this.stage ) {\n\n\t\t\t\tif ( -1 !== $.inArray( this.migration_intent, [ 'push', 'pull' ] ) ) {\n\t\t\t\t\tthis.stage = 'migrate';\n\t\t\t\t} else if ( 'import' === this.migration_intent ) {\n\t\t\t\t\tthis.stage = 'upload';\n\t\t\t\t} else {\n\t\t\t\t\tthis.stage = this.migration_intent;\n\t\t\t\t}\n\n\t\t\t\twpmdb.current_migration.model.setActiveStage( this.stage );\n\n\t\t\t\tif ( 'find_replace' !== this.stage && 'migrate' !== this.stage ) {\n\t\t\t\t\twpmdb.functions.wpmdb_call_next_hook();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ti = 0;\n\n\t\t\t\t// should get from model\n\t\t\t\tthis.tables_to_migrate = wpmdb.functions.get_tables_to_migrate( null, null );\n\n\t\t\t} else {\n\t\t\t\t$( '.progress-label' ).removeClass( 'label-visible' );\n\n\t\t\t\twpmdb.common.hooks = $.wpmdb.apply_filters( 'wpmdb_before_migration_complete_hooks', wpmdb.common.hooks );\n\t\t\t\twpmdb.common.hooks.push( wpmdb.functions.migration_complete );\n\t\t\t\twpmdb.common.hooks.push( wpmdb.functions.wpmdb_flush );\n\t\t\t\twpmdb.common.hooks = $.wpmdb.apply_filters( 'wpmdb_after_migration_complete_hooks', wpmdb.common.hooks );\n\t\t\t\twpmdb.common.hooks.push( wpmdb.functions.migration_complete_events );\n\t\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.wpmdb_call_next_hook };\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar last_table = 0;\n\t\tif ( i === (this.tables_to_migrate.length - 1) ) {\n\t\t\tlast_table = 1;\n\t\t}\n\n\t\tvar gzip = 0;\n\t\tif ( -1 !== $.inArray( this.migration_intent, [\n\t\t\t\t'push',\n\t\t\t\t'pull'\n\t\t\t] ) && 1 === parseInt( wpmdb.common.connection_data.gzip ) ) {\n\t\t\tgzip = 1;\n\t\t}\n\n\t\tvar request_data = {\n\t\t\taction: 'wpmdb_migrate_table',\n\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\ttable: this.tables_to_migrate[ i ],\n\t\t\tstage: this.stage,\n\t\t\tcurrent_row: current_row,\n\t\t\tlast_table: last_table,\n\t\t\tprimary_keys: primary_keys,\n\t\t\tgzip: gzip,\n\t\t\tnonce: wpmdb_data.nonces.migrate_table\n\t\t};\n\n\t\tif ( -1 !== $.inArray( this.migration_intent, [ 'push', 'pull' ] ) ) {\n\t\t\trequest_data.bottleneck = wpmdb.common.connection_data.bottleneck;\n\t\t\trequest_data.prefix = wpmdb.common.connection_data.prefix;\n\t\t}\n\n\t\tif ( wpmdb.common.connection_data && wpmdb.common.connection_data.path_current_site && wpmdb.common.connection_data.domain ) {\n\t\t\trequest_data.path_current_site = wpmdb.common.connection_data.path_current_site;\n\t\t\trequest_data.domain_current_site = wpmdb.common.connection_data.domain;\n\t\t}\n\n\t\tthis.doing_ajax = true;\n\n\t\t$.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'text',\n\t\t\tcache: false,\n\t\t\ttimeout: 0,\n\t\t\tdata: request_data,\n\t\t\terror: ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\tvar progress_text = wpmdb_strings.table_process_problem + ' ' + this.tables_to_migrate[ i ] + '<br /><br />' + wpmdb_strings.status + ': ' + jqXHR.status + ' ' + jqXHR.statusText + '<br /><br />' + wpmdb_strings.response + ':<br />' + jqXHR.responseText;\n\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, progress_text, 'error' );\n\n\t\t\t\tthis.doing_ajax = false;\n\t\t\t\tconsole.log( jqXHR );\n\t\t\t\tconsole.log( textStatus );\n\t\t\t\tconsole.log( errorThrown );\n\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\twpmdb.functions.migration_complete_events();\n\n\t\t\t},\n\t\t\tsuccess: ( data ) => {\n\t\t\t\tthis.doing_ajax = false;\n\t\t\t\tdata = $.trim( data );\n\t\t\t\tvar row_information = wpmdb.functions.wpmdb_parse_json( data );\n\t\t\t\tvar error_text = '';\n\n\t\t\t\tif ( false === row_information || null === row_information ) {\n\n\t\t\t\t\t// should update model\n\t\t\t\t\tif ( '' === data || null === data ) {\n\t\t\t\t\t\terror_text = wpmdb_strings.table_process_problem_empty_response + ' ' + this.tables_to_migrate[ i ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror_text = this.get_ajax_errors( data, null, null );\n\t\t\t\t\t}\n\n\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, error_text, 'error' );\n\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( 'undefined' !== typeof row_information.wpmdb_error && 1 === row_information.wpmdb_error ) {\n\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, row_information.body, 'error' );\n\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar item_name = this.tables_to_migrate[ i ];\n\t\t\t\tif ( 'import' === this.migration_intent && 'find_replace' === this.stage ) {\n\t\t\t\t\titem_name = item_name.replace( wpmdb_data.this_temp_prefix, '' );\n\t\t\t\t}\n\n\t\t\t\t//successful iteration\n\t\t\t\twpmdb.current_migration.setText();\n\t\t\t\twpmdb.current_migration.model.getStageModel( this.stage ).setItemRowsTransferred( item_name, row_information.current_row );\n\n\t\t\t\t// We need the returned file name for delivery or display to the user.\n\t\t\t\tif ( 1 === last_table && 'savefile' === this.migration_intent ) {\n\t\t\t\t\tif ( 'undefined' !== typeof row_information.dump_filename ) {\n\t\t\t\t\t\tthis.dump_filename = row_information.dump_filename;\n\t\t\t\t\t}\n\t\t\t\t\tif ( 'undefined' !== typeof row_information.dump_path ) {\n\t\t\t\t\t\tthis.dump_path = row_information.dump_path;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( -1 === parseInt( row_information.current_row ) ) {\n\t\t\t\t\ti++;\n\t\t\t\t\trow_information.current_row = '';\n\t\t\t\t\trow_information.primary_keys = '';\n\t\t\t\t}\n\n\t\t\t\twpmdb.common.next_step_in_migration = {\n\t\t\t\t\tfn: wpmdb.functions.migrate_table_recursive,\n\t\t\t\t\targs: [ row_information.current_row, row_information.primary_keys, i ]\n\t\t\t\t};\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}\n\t\t} );\n\n\t}\n\n\tmigration_complete_events() {\n\t\tif ( false === wpmdb.common.migration_error ) {\n\t\t\tif ( '' === wpmdb.common.non_fatal_errors ) {\n\t\t\t\tif ( 'savefile' !== this.migration_intent && true === $( '#save_computer' ).is( ':checked' ) ) {\n\t\t\t\t\twpmdb.current_migration.setText();\n\t\t\t\t}\n\n\t\t\t\tthis.completed_msg = this.completed_msg + '&nbsp;<div class=\"dashicons dashicons-yes\"></div>';\n\n\t\t\t\tif ( true === this.migration_cancelled ) {\n\t\t\t\t\tvar cancel_success = wpmdb_strings.migration_cancelled_success;\n\n\t\t\t\t\tif ( 'find_replace' === this.migration_intent ) {\n\t\t\t\t\t\tcancel_success = wpmdb_strings.find_replace_cancelled_success;\n\t\t\t\t\t}\n\n\t\t\t\t\twpmdb.current_migration.setState( this.completed_msg, cancel_success, 'cancelled' );\n\t\t\t\t} else {\n\t\t\t\t\twpmdb.current_migration.setState( this.completed_msg, '', 'complete' );\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.completed_with_some_errors, wpmdb.common.non_fatal_errors, 'error' );\n\t\t\t}\n\t\t}\n\n\t\t$( '.migration-controls' ).addClass( 'hidden' );\n\n\t\t// reset migration variables so consecutive migrations work correctly\n\t\twpmdb.common.hooks = [];\n\t\twpmdb.common.call_stack = [];\n\t\twpmdb.common.migration_error = false;\n\t\tthis.currently_migrating = false;\n\t\tthis.migration_completed = true;\n\t\tthis.migration_paused = false;\n\t\tthis.migration_cancelled = false;\n\t\tthis.doing_ajax = false;\n\t\twpmdb.common.non_fatal_errors = '';\n\t\tthis.tables_to_migrate = [];\n\n\t\t$( '.progress-label' ).remove();\n\t\t$( '.migration-progress-ajax-spinner' ).remove();\n\t\t$( '.close-progress-content' ).show();\n\t\t$( '#overlay' ).css( 'cursor', 'pointer' );\n\t\twpmdb.current_migration.model.setMigrationComplete();\n\t}\n\n\tmigration_complete() {\n\n\t\t$( '.migration-controls' ).addClass( 'hidden' );\n\n\t\tif ( 'savefile' === this.migration_intent ) {\n\t\t\tthis.currently_migrating = false;\n\t\t\tvar migrate_complete_text = wpmdb_strings.migration_complete;\n\t\t\tif ( $( '#save_computer' ).is( ':checked' ) ) {\n\t\t\t\tvar url = wpmdb_data.this_download_url + encodeURIComponent( this.dump_filename );\n\t\t\t\tif ( $( '#gzip_file' ).is( ':checked' ) ) {\n\t\t\t\t\turl += '&gzip=1';\n\t\t\t\t}\n\t\t\t\twindow.location = url;\n\t\t\t} else {\n\t\t\t\tmigrate_complete_text = wpmdb_strings.completed_dump_located_at + ' ' + this.dump_path;\n\t\t\t}\n\n\t\t\tif ( false === wpmdb.common.migration_error ) {\n\n\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\twpmdb.current_migration.setState( this.completed_msg, migrate_complete_text, 'complete' );\n\n\t\t\t}\n\n\t\t} else { // rename temp tables, delete old tables\n\n\t\t\twpmdb.current_migration.setState( null, wpmdb_strings.finalizing_migration, 'finalizing' );\n\n\t\t\tvar request_data = {\n\t\t\t\taction: 'wpmdb_finalize_migration',\n\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\ttables: this.tables_to_migrate.join( ',' ),\n\t\t\t\tnonce: wpmdb_data.nonces.finalize_migration\n\t\t\t};\n\n\t\t\tif ( -1 !== $.inArray( this.migration_intent, [ 'push', 'pull' ] ) ) {\n\t\t\t\trequest_data.prefix = wpmdb.common.connection_data.prefix;\n\t\t\t}\n\n\t\t\tthis.doing_ajax = true;\n\t\t\t$.ajax( {\n\t\t\t\turl: ajaxurl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdataType: 'text',\n\t\t\t\tcache: false,\n\t\t\t\tdata: request_data,\n\t\t\t\terror: ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, wpmdb_strings.finalize_tables_problem, 'error' );\n\n\t\t\t\t\talert( jqXHR + ' : ' + textStatus + ' : ' + errorThrown );\n\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\twpmdb.functions.migration_complete_events();\n\n\t\t\t\t},\n\t\t\t\tsuccess: ( data ) => {\n\t\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t\tif ( '1' !== $.trim( data ) ) {\n\t\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, data, 'error' );\n\n\t\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.wpmdb_call_next_hook };\n\t\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\twpmdb_flush() {\n\t\tif ( 'savefile' !== this.migration_intent ) {\n\t\t\twpmdb.current_migration.setText( wpmdb_strings.flushing );\n\t\t\tthis.doing_ajax = true;\n\t\t\t$.ajax( {\n\t\t\t\turl: ajaxurl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdataType: 'text',\n\t\t\t\tcache: false,\n\t\t\t\tdata: {\n\t\t\t\t\taction: 'wpmdb_flush',\n\t\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\t\tnonce: wpmdb_data.nonces.flush\n\t\t\t\t},\n\t\t\t\terror: ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, wpmdb_strings.flush_problem, 'error' );\n\n\t\t\t\t\talert( jqXHR + ' : ' + textStatus + ' : ' + errorThrown );\n\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\twpmdb.functions.migration_complete_events();\n\n\t\t\t\t},\n\t\t\t\tsuccess: ( data ) => {\n\t\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t\tif ( '1' !== $.trim( data ) ) {\n\t\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_failed, data, 'error' );\n\n\t\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twpmdb.common.next_step_in_migration = { fn: wpmdb.functions.wpmdb_call_next_hook };\n\t\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\texecute_next_step() {\n\n\t\t// if delay is set, set a timeout for delay to recall this function, then return\n\t\tif ( 0 < this.delay_between_requests && false === this.flag_skip_delay ) {\n\t\t\tsetTimeout( function() {\n\t\t\t\tthis.flag_skip_delay = true;\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}, this.delay_between_requests );\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.flag_skip_delay = false;\n\t\t}\n\n\t\tif ( true === this.migration_paused ) {\n\t\t\t$( '.migration-progress-ajax-spinner' ).hide();\n\n\t\t\t// Pause the timer\n\t\t\twpmdb.current_migration.pauseTimer();\n\n\t\t\tvar pause_text = '';\n\t\t\tif ( true === this.is_auto_pause_before_finalize ) {\n\t\t\t\tpause_text = wpmdb_strings.paused_before_finalize;\n\t\t\t\tthis.is_auto_pause_before_finalize = false;\n\n\t\t\t\tif ( 'find_replace' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\t\t\tpause_text = wpmdb_strings.find_replace_paused_before_finalize;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpause_text = wpmdb_strings.paused;\n\t\t\t}\n\n\t\t\twpmdb.current_migration.setState( null, pause_text, 'paused' );\n\n\t\t\t// Re-bind Pause/Resume button to Resume when we are finally Paused\n\t\t\t$( 'body' ).on( 'click', '.pause-resume', function( event ) {\n\t\t\t\tthis.set_pause_resume_button( event );\n\t\t\t} );\n\t\t\t$( 'body' ).on( 'click', '.cancel', function( event ) {\n\t\t\t\tthis.cancel_migration( event );\n\t\t\t} );\n\t\t\t$( '.pause-resume' ).html( wpmdb_strings.resume );\n\n\t\t} else if ( true === this.migration_cancelled ) {\n\t\t\tthis.migration_intent = wpmdb.functions.wpmdb_migration_type();\n\n\t\t\tvar progress_msg;\n\n\t\t\tif ( 'savefile' === this.migration_intent ) {\n\t\t\t\tprogress_msg = wpmdb_strings.removing_local_sql;\n\t\t\t} else if ( 'pull' === this.migration_intent ) {\n\t\t\t\tif ( 'backup' === this.stage ) {\n\t\t\t\t\tprogress_msg = wpmdb_strings.removing_local_backup;\n\t\t\t\t} else {\n\t\t\t\t\tprogress_msg = wpmdb_strings.removing_local_temp_tables;\n\t\t\t\t}\n\t\t\t} else if ( 'push' === this.migration_intent ) {\n\t\t\t\tif ( 'backup' === this.stage ) {\n\t\t\t\t\tprogress_msg = wpmdb_strings.removing_remote_sql;\n\t\t\t\t} else {\n\t\t\t\t\tprogress_msg = wpmdb_strings.removing_remote_temp_tables;\n\t\t\t\t}\n\t\t\t}\n\t\t\twpmdb.current_migration.setText( progress_msg );\n\n\t\t\tvar request_data = {\n\t\t\t\taction: 'wpmdb_cancel_migration',\n\t\t\t\tmigration_state_id: wpmdb.migration_state_id,\n\t\t\t\tnonce: wpmdb_data.nonces.cancel_migration\n\t\t\t};\n\n\t\t\tthis.doing_ajax = true;\n\n\t\t\t$.ajax( {\n\t\t\t\turl: ajaxurl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdataType: 'text',\n\t\t\t\tcache: false,\n\t\t\t\tdata: request_data,\n\t\t\t\terror: ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_cancellation_failed, wpmdb_strings.manually_remove_temp_files + '<br /><br />' + wpmdb_strings.status + ': ' + jqXHR.status + ' ' + jqXHR.statusText + '<br /><br />' + wpmdb_strings.response + ':<br />' + jqXHR.responseText, 'error' );\n\t\t\t\t\tconsole.log( jqXHR );\n\t\t\t\t\tconsole.log( textStatus );\n\t\t\t\t\tconsole.log( errorThrown );\n\t\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\twpmdb.functions.migration_complete_events();\n\n\t\t\t\t},\n\t\t\t\tsuccess: ( data ) => {\n\t\t\t\t\tthis.doing_ajax = false;\n\t\t\t\t\tdata = $.trim( data );\n\n\t\t\t\t\tif ( ('push' === this.migration_intent && '1' !== data) || ('push' !== this.migration_intent && '' !== data) ) {\n\n\t\t\t\t\t\tif ( 'undefined' !== typeof data && 'undefined' !== typeof data.wpmdb_error && 1 === data.wpmdb_error ) {\n\t\t\t\t\t\t\tdata = data.wpmdb_error;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twpmdb.current_migration.setState( wpmdb_strings.migration_cancellation_failed, data, 'error' );\n\t\t\t\t\t\twpmdb.common.migration_error = true;\n\t\t\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.completed_msg = wpmdb_strings.migration_cancelled;\n\n\t\t\t\t\tif ( 'find_replace' === this.migration_intent ) {\n\t\t\t\t\t\tthis.completed_msg = wpmdb_strings.find_replace_cancelled;\n\t\t\t\t\t}\n\n\t\t\t\t\twpmdb.functions.migration_complete_events();\n\t\t\t\t\twpmdb.current_migration.setStatus( 'cancelled' );\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\t\t\twpmdb.common.next_step_in_migration.fn.apply( null, wpmdb.common.next_step_in_migration.args );\n\t\t}\n\t}\n\n\tmaybe_show_prefix_notice( prefix ) {\n\t\tvar $prefix_notice = $( '.prefix-notice' );\n\n\t\t$prefix_notice.hide();\n\n\t\tif ( prefix !== wpmdb_data.this_prefix ) {\n\t\t\t$( '.remote-prefix' ).html( prefix );\n\t\t\tthis.show_prefix_notice = true;\n\t\t\t$prefix_notice.show();\n\t\t}\n\t}\n\n\tmaybe_show_mst_warning( data ) {\n\t\tconst migration_type = wpmdb.functions.wpmdb_migration_type();\n\t\tlet show_mst_warning = false;\n\n\t\tif ( -1 !== $.inArray( migration_type, [ 'push', 'pull' ] ) && 'undefined' !== typeof data.site_details ) {\n\t\t\tif ( wpmdb_data.site_details.is_multisite !== data.site_details.is_multisite ) {\n\t\t\t\tif ( 'undefined' === typeof wpmdb.mst || 'undefined' === typeof data.mst_available || '1' !== data.mst_available ) {\n\t\t\t\t\tshow_mst_warning = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( 'import' === migration_type ) {\n\t\t\tif ( 'undefined' !== typeof data.multisite && 'undefined' !== typeof data.subsite_export ) {\n\t\t\t\tif (\n\t\t\t\t\t('false' === wpmdb_data.site_details.is_multisite && 'true' === data.multisite && 'true' !== data.subsite_export) ||\n\t\t\t\t\t('true' === wpmdb_data.site_details.is_multisite && 'false' === data.multisite)\n\t\t\t\t) {\n\t\t\t\t\tshow_mst_warning = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tshow_mst_warning = $.wpmdb.apply_filters( 'wpmdb_show_mst_warning', show_mst_warning );\n\n\t\tif ( show_mst_warning ) {\n\t\t\t$( '.mst-required' ).show();\n\t\t}\n\n\t\treturn show_mst_warning;\n\n\t}\n\n\tmaybe_show_select_table_notice() {\n\n\t\t// check that they've selected some tables to migrate\n\t\tif ( $( '#migrate-selected' ).is( ':checked' ) && null === $( '#select-tables' ).val() ) {\n\t\t\tif ( 'import' !== wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\t\talert( wpmdb_strings.please_select_one_table );\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\tif ( $( '#import-find-replace' ).is( ':checked' ) && $( '#select-tables' ).is( ':visible' ) ) {\n\t\t\t\t\talert( wpmdb_strings.please_select_one_table_import );\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// check that they've selected some tables to backup\n\t\tif ( 'savefile' !== wpmdb.functions.wpmdb_migration_type() && $( '#backup-manual-select' ).is( ':checked' ) && null === $( '#select-backup' ).val() ) {\n\t\t\talert( wpmdb_strings.please_select_one_table_backup );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tremove_protocol( url ) {\n\t\treturn url.replace( /^https?:/i, '' );\n\t}\n\n\tcreate_table_select( tables, table_sizes_hr, selected_tables ) {\n\t\tvar $table_select = document.createElement( 'select' );\n\t\t$( $table_select ).attr( {\n\t\t\tmultiple: 'multiple',\n\t\t\tname: 'select_tables[]',\n\t\t\tid: 'select-tables',\n\t\t\tclass: 'multiselect'\n\t\t} );\n\n\t\tif ( 0 < tables.length ) {\n\t\t\t$.each( tables, function( index, table ) {\n\t\t\t\tif ( $.wpmdb.apply_filters( 'wpmdb_exclude_table', false, table ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar selected = ' ';\n\t\t\t\tif ( undefined !== selected_tables && null !== selected_tables && 0 < selected_tables.length && -1 !== $.inArray( table, selected_tables ) ) {\n\t\t\t\t\tselected = ' selected=\"selected\" ';\n\t\t\t\t}\n\n\t\t\t\tvar size = '';\n\t\t\t\tif ( 0 !== table_sizes_hr.length ) {\n\t\t\t\t\tsize = ' (' + table_sizes_hr[ table ] + ')';\n\t\t\t\t}\n\n\t\t\t\t$( $table_select ).append( '<option' + selected + 'value=\"' + table + '\">' + table + size + '</option>' );\n\t\t\t} );\n\t\t}\n\n\t\treturn $table_select;\n\t}\n\n\t/**\n\t * Returns tables selected for migration.\n\t *\n\t * @returns {array}\n\t *\n\t * Also handler for wpmdb_get_tables_to_migrate filter, disregards input values as it is the primary source.\n\t */\n\tget_tables_to_migrate() {\n\t\tvar tables = [];\n\t\tvar mig_type = wpmdb.functions.wpmdb_migration_type();\n\t\tvar table_intent = $( 'input[name=table_migrate_option]:checked' ).val();\n\n\t\t// Grab tables as per what the user has selected from the multiselect box or all prefixed tables.\n\t\tif ( 'migrate_select' === table_intent ) {\n\t\t\ttables = $( '#select-tables' ).val();\n\t\t} else {\n\t\t\tif ( 'pull' !== mig_type && 'undefined' !== typeof wpmdb_data.this_prefixed_tables ) {\n\t\t\t\ttables = wpmdb_data.this_prefixed_tables;\n\t\t\t} else if ( 'pull' === mig_type && 'undefined' !== typeof wpmdb.common.connection_data && 'undefined' !== typeof wpmdb.common.connection_data.prefixed_tables ) {\n\t\t\t\ttables = wpmdb.common.connection_data.prefixed_tables;\n\t\t\t}\n\t\t}\n\n\t\treturn tables;\n\t}\n\n\tupdate_migrate_button_text() {\n\t\tvar migration_intent = wpmdb.functions.wpmdb_migration_type();\n\t\tvar save_string = ($( '#save-migration-profile' ).is( ':checked' )) ? '_save' : '';\n\t\tvar migrate_string = 'migrate_button_' + (('savefile' === migration_intent) ? 'export' : migration_intent) + save_string;\n\t\t$( '.migrate-db .button-primary' ).val( wpmdb_strings[ migrate_string ] );\n\t}\n\n\t// fired when the connection info box changes (e.g. gets pasted into)\n\tconnection_box_changed() {\n\t\tvar $this = $( '.pull-push-connection-info' );\n\n\t\tif ( -1 === $.inArray( wpmdb.functions.wpmdb_migration_type(), [ 'push', 'pull' ] ) ||\n\t\t     (this.doing_ajax || $( $this ).hasClass( 'temp-disabled' )) && false === wpmdb.force_reconnect ) {\n\t\t\treturn;\n\t\t}\n\n\t\twpmdb.force_reconnect = false;\n\t\tvar data = $( '.pull-push-connection-info' ).val();\n\n\t\tvar connection_info = $.trim( data ).split( '\\n' );\n\t\tvar error = false;\n\t\tvar error_message = '';\n\n\t\tif ( '' === connection_info ) {\n\t\t\terror = true;\n\t\t\terror_message = wpmdb_strings.connection_info_missing;\n\t\t}\n\n\t\t// attempt to format the connection info from a single line\n\t\tif ( 1 === connection_info.length && !error ) {\n\t\t\tvar connection_words = $.trim( data ).split( ' ' );\n\t\t\tif ( 2 === connection_words.length ) {\n\t\t\t\tconnection_info = connection_words;\n\t\t\t}\n\t\t}\n\n\t\tif ( 2 !== connection_info.length && !error ) {\n\t\t\terror = true;\n\t\t\terror_message = wpmdb_strings.connection_info_incorrect;\n\t\t}\n\n\t\tif ( !error && !this.validate_url( connection_info[ 0 ] ) ) {\n\t\t\terror = true;\n\t\t\terror_message = wpmdb_strings.connection_info_url_invalid;\n\t\t}\n\n\t\tvar key_length = 0;\n\n\t\tif ( 'undefined' !== typeof connection_info[ 1 ] ) {\n\t\t\tkey_length = connection_info[ 1 ].length;\n\t\t}\n\n\t\tif ( !error && 32 !== key_length && 40 !== key_length ) {\n\t\t\terror = true;\n\t\t\terror_message = wpmdb_strings.connection_info_key_invalid;\n\t\t}\n\n\t\tif ( !error && connection_info[ 0 ] === wpmdb_data.connection_info[ 0 ] ) {\n\t\t\terror = true;\n\t\t\terror_message = wpmdb_strings.connection_info_local_url;\n\t\t}\n\n\t\tif ( !error && connection_info[ 1 ] === wpmdb_data.connection_info[ 1 ] ) {\n\t\t\terror = true;\n\t\t\terror_message = wpmdb_strings.connection_info_local_key;\n\t\t}\n\t\tif ( error ) {\n\t\t\t$( '.connection-status' ).html( error_message );\n\t\t\t$( '.connection-status' ).addClass( 'notification-message error-notice migration-error' );\n\t\t\treturn;\n\t\t}\n\n\t\tvar new_connection_info_contents = connection_info[ 0 ] + '\\n' + connection_info[ 1 ];\n\n\t\t// If connection info is a single line\n\t\tif ( 1 === $.trim( data ).split( '\\n' ).length ) {\n\n\t\t\t// Repopulate the input with the info on two lines\n\t\t\t$( '.pull-push-connection-info' ).val( new_connection_info_contents );\n\t\t}\n\n\t\tif ( false === wpmdb_data.openssl_available ) {\n\t\t\tconnection_info[ 0 ] = connection_info[ 0 ].replace( 'https://', 'http://' );\n\t\t\tnew_connection_info_contents = connection_info[ 0 ] + '\\n' + connection_info[ 1 ];\n\t\t\t$( '.pull-push-connection-info' ).val( new_connection_info_contents );\n\t\t}\n\n\t\tthis.show_prefix_notice = false;\n\t\tthis.doing_ajax = true;\n\t\tthis.disable_export_type_controls();\n\n\t\tif ( $( '.basic-access-auth-wrapper' ).is( ':visible' ) ) {\n\t\t\tconnection_info[ 0 ] = connection_info[ 0 ].replace( /\\/\\/(.*)@/, '//' );\n\t\t\tconnection_info[ 0 ] = connection_info[ 0 ].replace( '//', '//' + encodeURIComponent( $.trim( $( '.auth-username' ).val() ) ) + ':' + encodeURIComponent( $.trim( $( '.auth-password' ).val() ) ) + '@' );\n\t\t\tnew_connection_info_contents = connection_info[ 0 ] + '\\n' + connection_info[ 1 ];\n\t\t\t$( '.pull-push-connection-info' ).val( new_connection_info_contents );\n\t\t\t$( '.basic-access-auth-wrapper' ).hide();\n\t\t}\n\n\t\t$( '.step-two' ).hide();\n\t\t$( '.ssl-notice' ).hide();\n\t\t$( '.prefix-notice' ).hide();\n\t\t$( '.connection-status' ).show();\n\n\t\t$( '.connection-status' ).html( wpmdb_strings.establishing_remote_connection );\n\t\t$( '.connection-status' ).removeClass( 'notification-message error-notice migration-error' );\n\t\t$( '.connection-status' ).append( this.ajax_spinner );\n\n\t\tvar intent = wpmdb.functions.wpmdb_migration_type();\n\n\t\tthis.profile_name_edited = false;\n\n\t\treturn $.ajax( {\n\t\t\turl: ajaxurl,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tcache: false,\n\t\t\tdata: {\n\t\t\t\taction: 'wpmdb_verify_connection_to_remote_site',\n\t\t\t\turl: connection_info[ 0 ],\n\t\t\t\tkey: connection_info[ 1 ],\n\t\t\t\tintent: intent,\n\t\t\t\tnonce: wpmdb_data.nonces.verify_connection_to_remote_site\n\t\t\t},\n\t\t\terror: ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\t$( '.connection-status' ).html( this.get_ajax_errors( jqXHR.responseText, '(#100)', jqXHR ) );\n\t\t\t\t$( '.connection-status' ).addClass( 'notification-message error-notice migration-error' );\n\t\t\t\t$( '.ajax-spinner' ).remove();\n\t\t\t\tthis.doing_ajax = false;\n\t\t\t\tthis.enable_export_type_controls();\n\t\t\t},\n\t\t\tsuccess: ( data ) => {\n\t\t\t\t$( '.ajax-spinner' ).remove();\n\t\t\t\tthis.doing_ajax = false;\n\t\t\t\tthis.enable_export_type_controls();\n\n\t\t\t\tif ( 'undefined' !== typeof data.wpmdb_error && 1 === data.wpmdb_error ) {\n\t\t\t\t\t$( '.connection-status' ).html( data.body );\n\t\t\t\t\t$( '.connection-status' ).addClass( 'notification-message error-notice migration-error' );\n\n\t\t\t\t\tif ( data.body.indexOf( '401 Unauthorized' ) > -1 ) {\n\t\t\t\t\t\t$( '.basic-access-auth-wrapper' ).show();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( !$( '.pull-push-connection-info' ).hasClass( 'temp-disabled' ) && !$( '.connect-button' ).is( ':visible' ) ) {\n\t\t\t\t\t\t$( '.pull-push-connection-info' ).removeAttr( 'readonly' );\n\t\t\t\t\t\t$( '.connect-button' ).show();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( true === this.maybe_show_mst_warning( data ) ) {\n\t\t\t\t\t$( '.connection-status' ).hide();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.maybe_show_ssl_warning( connection_info[ 0 ], connection_info[ 1 ], data.scheme );\n\n\t\t\t\tvar profile_name = this.get_domain_name( data.url );\n\t\t\t\t$( '.create-new-profile' ).val( profile_name );\n\n\t\t\t\t$( '.pull-push-connection-info' ).addClass( 'temp-disabled' );\n\t\t\t\t$( '.pull-push-connection-info' ).attr( 'readonly', 'readonly' );\n\t\t\t\t$( '.connect-button' ).hide();\n\n\t\t\t\t$( '.connection-status' ).hide();\n\t\t\t\t$( '.step-two' ).show();\n\n\t\t\t\twpmdb.functions.maybe_show_prefix_notice( data.prefix );\n\n\t\t\t\tthis.connection_established = true;\n\t\t\t\tthis.set_connection_data( data );\n\t\t\t\tthis.move_connection_info_box();\n\t\t\t\tthis.change_replace_values();\n\n\t\t\t\tthis.maybe_show_mixed_cased_table_name_warning();\n\n\t\t\t\tthis.refresh_table_selects( null, null, this );\n\n\t\t\t\tthis.$push_select_backup = $( this.$pull_select ).clone();\n\t\t\t\t$( this.$push_select_backup ).attr( {\n\t\t\t\t\tname: 'select_backup[]',\n\t\t\t\t\tid: 'select-backup'\n\t\t\t\t} );\n\n\t\t\t\tvar $post_type_select = document.createElement( 'select' );\n\t\t\t\t$( $post_type_select ).attr( {\n\t\t\t\t\tmultiple: 'multiple',\n\t\t\t\t\tname: 'select_post_types[]',\n\t\t\t\t\tid: 'select-post-types',\n\t\t\t\t\tclass: 'multiselect'\n\t\t\t\t} );\n\n\t\t\t\t$.each( wpmdb.common.connection_data.post_types, function( index, value ) {\n\t\t\t\t\t$( $post_type_select ).append( '<option value=\"' + value + '\">' + value + '</option>' );\n\t\t\t\t} );\n\n\t\t\t\tthis.$pull_post_type_select = $post_type_select;\n\n\t\t\t\t$( '#new-path-missing-warning, #new-url-missing-warning' ).hide();\n\n\t\t\t\tif ( 'pull' === wpmdb.functions.wpmdb_migration_type() ) {\n\t\t\t\t\t$( '#new-url' ).val( this.remove_protocol( wpmdb_data.this_url ) );\n\t\t\t\t\t$( '#new-path' ).val( wpmdb_data.this_path );\n\t\t\t\t\tif ( 'true' === wpmdb_data.is_multisite ) {\n\t\t\t\t\t\t$( '#new-domain' ).val( wpmdb_data.this_domain );\n\t\t\t\t\t\t$( '.replace-row.pin .old-replace-col input[type=\"text\"]' ).val( this.remove_protocol( data.url ) );\n\t\t\t\t\t}\n\t\t\t\t\t$( '#old-url' ).val( this.remove_protocol( data.url ) );\n\t\t\t\t\t$( '#old-path' ).val( data.path );\n\n\t\t\t\t\t$.wpmdb.do_action( 'wpmdb_update_pull_table_select' );\n\t\t\t\t\t$( '#select-post-types' ).remove();\n\t\t\t\t\t$( '.exclude-post-types-warning' ).after( this.$pull_post_type_select );\n\t\t\t\t\twpmdb.functions.exclude_post_types_warning();\n\t\t\t\t\t$( '.table-prefix' ).html( data.prefix );\n\t\t\t\t\t$( '.backup-table-prefix' ).html( wpmdb_data.site_details.prefix );\n\t\t\t\t\t$( '.uploads-dir' ).html( wpmdb_data.this_uploads_dir );\n\t\t\t\t} else {\n\t\t\t\t\t$( '#new-url' ).val( this.remove_protocol( data.url ) );\n\t\t\t\t\t$( '#new-path' ).val( data.path );\n\n\t\t\t\t\tif ( 'true' === wpmdb_data.is_multisite ) {\n\t\t\t\t\t\t$( '.replace-row.pin .old-replace-col input[type=\"text\"]' ).val( this.remove_protocol( wpmdb_data.this_url ) );\n\t\t\t\t\t}\n\t\t\t\t\t$.wpmdb.do_action( 'wpmdb_update_push_table_select' );\n\t\t\t\t\t$( '#select-backup' ).remove();\n\t\t\t\t\t$( '.backup-tables-wrap' ).prepend( this.$push_select_backup );\n\t\t\t\t}\n\n\t\t\t\twpmdb.common.next_step_in_migration = {\n\t\t\t\t\tfn: $.wpmdb.do_action,\n\t\t\t\t\targs: [ 'verify_connection_to_remote_site', wpmdb.common.connection_data ]\n\t\t\t\t};\n\t\t\t\twpmdb.functions.execute_next_step();\n\t\t\t}\n\t\t} );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/wp-migrate-db-pro/asset/src/js/helpers/wpmdbGlobals.js","/*** IMPORTS FROM imports-loader ***/\nvar $ = window.jQuery;\n\n// removed by extract-text-webpack-plugin\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/imports-loader?$=>window.jQuery!./src/wp-migrate-db-pro-multisite-tools/asset/src/sass/styles.scss\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}