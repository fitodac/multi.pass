{"version":3,"sources":["coursepress.js"],"names":["CoursePress","Define","$","CoursesList","View","extend","el","events","click .cp-reset-step","change .cp-toggle-course-status","click .menu-item-duplicate-course","click .menu-item-delete","click #cp-search-clear","initialize","this","request","Request","on","revertStatusToggle","resetEditStep","ev","sender","target","step","data","course_id","parents","first","Cookie","set","toggleCourseStatus","selector","status","prop","action","val","save","checked","duplicateCourse","deleteCourse","clearSearch","removeAttr","submit"],"mappings":";;;CAKA,WACI,YAEAA,aAAYC,OAAQ,aAAc,SAASC,GACvC,GAAIC,EAEJA,GAAcH,YAAYI,KAAKC,QAC3BC,GAAIJ,EAAE,2BACNK,QACIC,uBAAwB,gBACxBC,kCAAmC,qBACnCC,oCAAqC,kBACrCC,0BAA2B,eAC3BC,yBAA0B,eAG9BC,WAAY,WACRC,KAAKC,QAAU,GAAIf,aAAYgB,QAE/BF,KAAKC,QAAQE,GAAI,yCAA0CH,KAAKI,mBAAoBJ,OAMxFK,cAAe,SAASC,GACpB,GAAIC,GAASnB,EAAEkB,EAAGE,QACdC,EAAOF,EAAOG,KAAK,QACnBC,EAAYJ,EAAOK,QAAQ,MAAMC,QAAQH,KAAK,KAClDxB,aAAY4B,OAAO,qBAAuBH,GAAYI,IAAKN,EAAM,SAMrEO,mBAAoB,SAASV,GACzBN,KAAKC,QAAQgB,SAAW7B,EAAEkB,EAAGE,OAC7B,IAAIU,GAASlB,KAAKC,QAAQgB,SAASE,KAAK,WAAa,UAAY,OACjEnB,MAAKC,QAAQc,KACTK,OAAW,uBACXT,UAAcX,KAAKC,QAAQgB,SAASI,MACpCH,OAAWA,IAEflB,KAAKC,QAAQqB,QAMjBlB,mBAAoB,WAChB,GAAImB,GAAUvB,KAAKC,QAAQgB,SAASE,KAAK,UACzCnB,MAAKC,QAAQgB,SAASE,KAAK,WAAYI,IAG3CC,gBAAiB,aAIjBC,aAAc,aAOdC,YAAa,WAET1B,KAAKZ,EAAE,kBAAkB,mBAAmBuC,WAAW,QACvD3B,KAAKZ,EAAE,mBAAmBwC,YAIlCvC,EAAc,GAAIA","file":"../coursepress.min.js","sourcesContent":["/*! CoursePress - v3.0.0\n * https://premium.wpmudev.org/project/coursepress-pro/\n * Copyright (c) Thu Jul 06 2017; * Licensed GPLv2+ */\n/* global CoursePress */\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    CoursePress.Define( 'CourseList', function($) {\r\n        var CoursesList;\r\n\r\n        CoursesList = CoursePress.View.extend({\r\n            el: $('#coursepress-courselist'),\r\n            events: {\r\n                'click .cp-reset-step': 'resetEditStep',\r\n                'change .cp-toggle-course-status': 'toggleCourseStatus',\r\n                'click .menu-item-duplicate-course': 'duplicateCourse',\r\n                'click .menu-item-delete': 'deleteCourse',\r\n                'click #cp-search-clear': 'clearSearch'\r\n            },\r\n\r\n            initialize: function() {\r\n                this.request = new CoursePress.Request();\r\n                // On status toggle fail.\r\n                this.request.on( 'coursepress:error_course_status_toggle', this.revertStatusToggle, this );\r\n            },\r\n\r\n            /**\r\n             * Resets browser saved step and load course setup.\r\n             */\r\n            resetEditStep: function(ev) {\r\n                var sender = $(ev.target),\r\n                    step = sender.data('step'),\r\n                    course_id = sender.parents('td').first().data('id');\r\n                CoursePress.Cookie('course_setup_step_' + course_id ).set( step, 86400 * 7);\r\n            },\r\n\r\n            /**\r\n             * Toggle course status.\r\n             */\r\n            toggleCourseStatus: function(ev) {\r\n                this.request.selector = $(ev.target);\r\n                var status = this.request.selector.prop('checked') ? 'publish' : 'draft';\r\n                this.request.set( {\r\n                    'action' : 'course_status_toggle',\r\n                    'course_id' : this.request.selector.val(),\r\n                    'status' : status\r\n                } );\r\n                this.request.save();\r\n            },\r\n\r\n            /**\r\n             * Revert toggled status.\r\n             */\r\n            revertStatusToggle: function() {\r\n                var checked = this.request.selector.prop('checked');\r\n                this.request.selector.prop('checked', !checked);\r\n            },\r\n\r\n            duplicateCourse: function() {\r\n                // @todo: duplicate course here\r\n            },\r\n\r\n            deleteCourse: function() {\r\n                // @todo: delete course\r\n            },\r\n\r\n            /**\r\n             * Clear search form and submit.\r\n             */\r\n            clearSearch: function() {\r\n                // Removing name will exclude this field from form values.\r\n                this.$('input[name=\"s\"]','#cp-search-form').removeAttr('name');\r\n                this.$('#cp-search-form').submit();\r\n            }\r\n        });\r\n\r\n        CoursesList = new CoursesList();\r\n    });\r\n})();"]}