!function(t){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(s){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],l(t,this),s)};case 4:return function(t,s,o){return i[e](this[n],l(t,this),s,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}},r=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=a(e,s,n))})},l=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?c(t):i.isString(t)?function(e){return e.get(t)}:t},c=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},d=e.Events={},u=/\s+/,p=function(t,e,n,s,o){var a,r=0;if(n&&"object"==typeof n){void 0!==s&&"context"in o&&void 0===o.context&&(o.context=s);for(a=i.keys(n);r<a.length;r++)e=p(t,e,a[r],n[a[r]],o)}else if(n&&u.test(n))for(a=n.split(u);r<a.length;r++)e=t(e,a[r],s,o);else e=t(e,n,s,o);return e};d.on=function(t,e,i){return h(this,t,e,i)};var h=function(t,e,i,n,s){if(t._events=p(_,t._events||{},e,i,{context:n,ctx:t,listening:s}),s){var o=t._listeners||(t._listeners={});o[s.id]=s}return t};d.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[s];if(!a){var r=this._listenId||(this._listenId=i.uniqueId("l"));a=o[s]={obj:t,objId:s,id:r,listeningTo:o,count:0}}return h(t,e,n,this,a),this};var _=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),o=n.context,a=n.ctx,r=n.listening;r&&r.count++,s.push({callback:i,context:o,ctx:o||a,listening:r})}return t};d.off=function(t,e,i){return this._events?(this._events=p(f,this._events,t,e,{context:i,listeners:this._listeners}),this):this},d.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var o=t?[t._listenId]:i.keys(s),a=0;a<o.length;a++){var r=s[o[a]];if(!r)break;r.obj.off(e,n,this)}return this};var f=function(t,e,n,s){if(t){var o,a=0,r=s.context,l=s.listeners;if(e||n||r){for(var c=e?[e]:i.keys(t);a<c.length;a++){e=c[a];var d=t[e];if(!d)break;for(var u=[],p=0;p<d.length;p++){var h=d[p];n&&n!==h.callback&&n!==h.callback._callback||r&&r!==h.context?u.push(h):(o=h.listening,o&&0===--o.count&&(delete l[o.id],delete o.listeningTo[o.objId]))}u.length?t[e]=u:delete t[e]}return t}for(var _=i.keys(l);a<_.length;a++)o=l[_[a]],delete l[o.id],delete o.listeningTo[o.objId]}};d.once=function(t,e,n){var s=p(g,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(s,e,n)},d.listenToOnce=function(t,e,n){var s=p(g,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var g=function(t,e,n,s){if(n){var o=t[e]=i.once(function(){s(e,o),n.apply(this,arguments)});o._callback=n}return t};d.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return p(m,this._events,t,void 0,i),this};var m=function(t,e,i,n){if(t){var s=t[e],o=t.all;s&&o&&(o=o.slice()),s&&v(s,n),o&&v(o,[e].concat(n))}return t},v=function(t,e){var i,n=-1,s=t.length,o=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,a,r);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};d.bind=d.on,d.unbind=d.off,i.extend(e,d);var w=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var s=i.result(this,"defaults");n=i.defaults(i.extend({},s,n),s),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(w.prototype,d,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"==typeof t?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var o=n.unset,a=n.silent,r=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var c=this.attributes,d=this.changed,u=this._previousAttributes;for(var p in s)e=s[p],i.isEqual(c[p],e)||r.push(p),i.isEqual(u[p],e)?delete d[p]:d[p]=e,o?delete c[p]:c[p]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!a){r.length&&(this._pending=n);for(var h=0;h<r.length;h++)this.trigger("change:"+r[h],this,c[r[h]],n)}if(l)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var o=t[s];i.isEqual(e[s],o)||(n[s]=o)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;return!!e.set(s,t)&&(n&&n.call(t.context,e,i,t),void e.trigger("sync",e,i,t))},F(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0,parse:!0},n);var o=n.wait;if(s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var a=this,r=n.success,l=this.attributes;n.success=function(t){a.attributes=l;var e=n.parse?a.parse(t,n):t;return o&&(e=i.extend({},s,e)),!(e&&!a.set(e,n))&&(r&&r.call(n.context,a,t,n),void a.trigger("sync",a,t,n))},F(this,n),s&&o&&(this.attributes=i.extend({},l,s));var c=this.isNew()?"create":n.patch?"patch":"update";"patch"!==c||n.attrs||(n.attrs=s);var d=this.sync(c,this,n);return this.attributes=l,d},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var a=!1;return this.isNew()?i.defer(t.success):(F(this,t),a=this.sync("delete",this,t)),s||o(),a},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||z();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var y={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r(w,y,"attributes");var b=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},C={add:!0,remove:!1},O=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,s=Array(t.length-i),o=e.length;for(n=0;n<s.length;n++)s[n]=t[n+i];for(n=0;n<o;n++)t[n+i]=e[n];for(n=0;n<s.length;n++)t[n+o+i]=s[n]};i.extend(b.prototype,d,{model:w,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,C))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),n?s[0]:s},set:function(t,e){if(null!=t){e=i.extend({},x,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var o,a,r=[],l=[],c=[],d=[],u={},p=e.add,h=e.merge,_=e.remove,f=!1,g=this.comparator&&null==s&&e.sort!==!1,m=i.isString(this.comparator)?this.comparator:null;for(a=0;a<t.length;a++){o=t[a];var v=this.get(o);if(v){if(h&&o!==v){var w=this._isModel(o)?o.attributes:o;e.parse&&(w=v.parse(w,e)),v.set(w,e),c.push(v),g&&!f&&(f=v.hasChanged(m))}u[v.cid]||(u[v.cid]=!0,r.push(v)),t[a]=v}else p&&(o=t[a]=this._prepareModel(o,e),o&&(l.push(o),this._addReference(o,e),u[o.cid]=!0,r.push(o)))}if(_){for(a=0;a<this.length;a++)o=this.models[a],u[o.cid]||d.push(o);d.length&&this._removeModels(d,e)}var y=!1,b=!g&&p&&_;if(r.length&&b?(y=this.length!==r.length||i.some(this.models,function(t,e){return t!==r[e]}),this.models.length=0,O(this.models,r,0),this.length=this.models.length):l.length&&(g&&(f=!0),O(this.models,l,null==s?this.length:s),this.length=this.models.length),f&&this.sort({silent:!0}),!e.silent){for(a=0;a<l.length;a++)null!=s&&(e.index=s+a),o=l[a],o.trigger("add",o,this,e);(f||y)&&this.trigger("sort",this,e),(l.length||d.length||c.length)&&(e.changes={added:l,removed:d,merged:c},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=i.extend({parse:!0},t);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},F(this,t),this.sync("read",this,t)},create:function(t,e){e=e?i.clone(e):{};var n=e.wait;if(t=this._prepareModel(t,e),!t)return!1;n||this.add(t,e);var s=this,o=e.success;return e.success=function(t,e,i){n&&s.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var o=this.indexOf(s);this.models.splice(o,1),this.length--,delete this._byId[s.cid];var a=this.modelId(s.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i},_isModel:function(t){return t instanceof w},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);s!==o&&(null!=s&&delete this._byId[s],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});var k={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};r(b,k,"models");var E=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,T)),this._ensureElement(),this.initialize.apply(this,arguments)},I=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(E.prototype,d,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(I);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var o=H[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:o,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||z()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",s.emulateJSON&&(a.data._method=o);var r=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),r)return r.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1);var l=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,l&&l.call(s.context,t,e,i)};var c=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,c,s),c};var H={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,j=/(\(\?)?:\w+/g,N=/\*\w+/g,$=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(S.prototype,d,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var a=o._extractParameters(t,i);o.execute(s,a,n)!==!1&&(o.trigger.apply(o,["route:"+n].concat(a)),o.trigger("route",n,a),e.history.trigger("route",o,n,a))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace($,"\\$&").replace(P,"(?:$1)?").replace(j,function(t,e){return e?t:"([^/?]+)"}).replace(N,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var R=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,M=/#.*$/;R.started=!1,i.extend(R.prototype,d,{interval:50,atRoot:function(){var t=this.location.pathname.replace(/[^\/]$/,"$&/");return t===this.root&&!this.getSearch()},matchRoot:function(){var t=this.decodeFragment(this.location.pathname),e=t.slice(0,this.root.length-1)+"/";return e===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(A,"")},start:function(t){if(R.started)throw new Error("Backbone.history has already been started");if(R.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(U,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),R.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!R.started)return!1;e&&e!==!0||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(M,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new R;var B=function(t,e){var n,s=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e),n.prototype=i.create(s.prototype,t),n.prototype.constructor=n,n.__super__=s.prototype,n};w.extend=b.extend=S.extend=E.extend=R.extend=B;var z=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),function(t){"use strict";window.Hustle=function(t,e,i){var n={},s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},o=function(s,o){var a=s.split(".");if(a.length){var r=function(n,s){var a=n.split("."),l=a.splice(0,1)[0];if(l){if(a.length)s[l]=s[l]||{};else{var c=o.call(null,t,e,i);s[l]=_.isFunction(c)||"undefined"==typeof c?c:_.extend(s[l]||{},c)}a.length&&l&&r(a.join("."),s[l])}};r(s,n)}else{var l=n[s]||{};n[s]=_.extend(l,o.call(null,t,e,i))}},a=function(){return n},r=function(t){if(t.split(".").length){var e=!1,i=function(t,n){var s=t.split("."),o=s.splice(0,1)[0];e=n[o],s.length&&i(s.join("."),n[o])};return i(t,n),e}return n[t]||!1},l=_.extend({},Backbone.Events),c=Backbone.View.extend({__base_events:{"click .wph-tabs--wrap .wph-tabs--nav li label":"__base_toggle_tab"},initialize:function(){this.events=_.extend({},this.events,this.__base_events),_.isFunction(this.init_mix)&&this.init_mix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,function(t){this.trigger("before_render"),t.call(this),l.trigger("view.rendered",this),this.trigger("rendered")})),_.isFunction(this.init)&&this.init.apply(this,arguments)},__base_toggle_tab:function(t){var e=this.$(t.target),i=(e.attr("href")||"").replace(/^\#/,""),n=!!i&&this.$("#"+i),s=e.closest(".wph-tabs--wrap"),o=e.closest("li");n&&n.length&&(s.find(".wph-tabs--content").not(n).removeClass("current"),n.addClass("current"),o.addClass("current"),o.siblings().removeClass("current"))}}),d=_.memoize(function(t){var e;return function(i){return(e=e||_.template(document.getElementById(t).innerHTML,null,s))(i)}}),u=_.memoize(function(t){var e;return function(i){return(e=e||_.template(t,null,s))(i)}}),p=function(){return t.extend(!0,{},s)},h=function(){var e=function(t){var e,i,n,s=document.cookie.split(";");for(n=t+"=",e=0;e<s.length;e+=1){for(i=s[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n)){var o=i.substring(n.length,i.length);return o?JSON.parse(o):o}}return null},i=function(e,i,n){var s,o;i=t.isArray(i)||t.isPlainObject(i)?JSON.stringify(i):i,isNaN(n)?o="":(s=new Date,s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toGMTString()),document.cookie=e+"="+i+o+"; path=/"};return{set:i,get:e}}(),f=function(){return{Never_See_Aagain_Prefix:"hustle_never_see_again-",Module_Show_Count:"hustle_module_show_count-"}}();return{define:o,get_modules:a,get:r,Events:l,View:c,template:d,create_template:u,get_template_options:p,cookie:h,consts:f}}(jQuery,document,window)}(jQuery);var Optin=Optin||{};Optin.View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(t){Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.SLIDE_IN_COOKIE_HIDE_ALL="inc_optin_slide_in_hide_all",_.mixin({log:function(){console.log(arguments)},toBool:function(t){return _.isBoolean(t)?t:_.isString(t)&&["true","false","1"].indexOf(t.toLowerCase())!==-1?"true"===t.toLowerCase()||"1"===t.toLowerCase():_.isNumber(t)?!!t:!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&t},isTrue:function(t){return!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&(_.isNumber(t)?0!==t:(t=t.toString().toLowerCase(),["1","true","on"].indexOf(t)!==-1))},isFalse:function(t){return!_.isTrue(t)},control_base:function(t,e,i){return i=_.isUndefined(i)?"checked":i,t=_.toBool(t),e=_.isBoolean(t)?_.isTrue(e):e,_.isEqual(t,e)?i+"="+i:""},checked:function(t,e){return _.control_base(t,e,"checked")},selected:function(t,e){return _.control_base(t,e,"selected")},disabled:function(t,e){return _.control_base(t,e,"disabled")},"class":function(t,e,i){return _.isTrue(t)?e:"undefined"!=typeof i?i:""},add_class:function(t,e,i){return"class={class}".replace("{class}",_["class"](t,e,i))},toUpperCase:function(t){return _.isString(t)?t.toUpperCase():""}}),_.findKey||_.mixin({findKey:function(t,e,i){e=cb(e,i);for(var n,s=_.keys(t),o=0,a=s.length;o<a;o++)if(n=s[o],e(t[n],n,t))return n}}),Backbone.Model.prototype.toJSON=function(){var t=_.clone(this.attributes);for(var e in t)(t[e]instanceof Backbone.Model||Backbone.Collection&&t[e]instanceof Backbone.Collection)&&(t[e]=t[e].toJSON());return t},String.prototype.toInt=function(){return parseInt(this,10)},String.prototype.isEmpty=function(){return 0===this.length||!this.trim()},Optin.template=_.memoize(function(e){var i,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(s){return(i=i||_.template(t("#"+e).html(),null,n))(s)}}),Optin.cookie=Hustle.cookie,t(document).on("blur","input, textarea, select",function(){var e=t(this);e.is(":input[type=button], :input[type=submit], :input[type=reset]")||(e.val()&&e.val().trim&&""!==e.val().trim()?e.parent().addClass("wpoi-filled"):e.parent().removeClass("wpoi-filled"))}),Optin.Mixins={_mixins:{},_services_mixins:{},_desing_mixins:{},_display_mixins:{},add:function(t,e){this._mixins[t]=e},get_mixins:function(){return this._mixins},add_services_mixin:function(t,e){this._services_mixins[t]=e},get_services_mixins:function(){return this._services_mixins}}}(jQuery),Hustle.define("Modal",function(t){"use strict";return Backbone.View.extend({template:Optin.template("hustle-modal-tpl"),$mask:t('<div class="wph-modal--mask"></div>'),opts:{},data:{id:"",type:"popup",style:"",title:"",subtitle:"",content:"Content",animation_in:"",animation_out:"",position:""},events:{"click .wph-modal--close a":"hide","submit form":"fire_conversion_event","click .wph-modal--cta":"fire_conversion_event","click .wph-modal-never-see-again":"never_see_again"},initialize:function(t){return this.opts=_.extend({},this.opts,t),t.template&&(this.template=t.template),this.render(),this},render:function(){var t=_.extend({},this.data,this.model.toJSON());if(this.type_data=t.types[t.type],this.animation_in=t.animation_in=t.types[t.type].animation_in||t.animation_in,this.animation_out=t.animation_out=t.types[t.type].animation_out||t.animation_out,t.position=t.types[t.type].position||t.position,t=this.sanitize_cta_url(t),t=this.enable_fullscreen(t),t=this.handle_custom_size_cc(t),this.setElement(this.template(t)),this.$mask=this.$mask.clone(),this.$mask.on("click",_.bind(this.clicked_background,this)),this.$el.find("form").on("submit",_.bind(this.on_form_submit,this)),this.enable_body_scroll(t),window.hasOwnProperty("optin_vars")){var e=this.$el.find("a.wph-icon.i-close");e.length&&e.parent().hide()}return this},hide:function(e){var i=this;e&&e.preventDefault(),i.animation_in!==i.animation_out&&i.$el.removeClass(i.animation_in),_.delay(function(){i.animation_out&&!i.$el.hasClass(i.animation_out)&&i.$el.addClass(i.animation_out),_.delay(function(){i.$el.removeClass("wph-modal-show"),i.$el.prev(".wph-modal--mask").remove(),Hustle.Events.trigger("hide_modal",i),i.trigger("hidden"),_.isTrue(i.type_data.close_btn_as_never_see)&&e&&t(e.target).hasClass("wph-icon i-close")&&i.never_see_again(e)},550)},350),t("html").removeClass("no-scroll")},clicked_background:function(t){_.isTrue(this.type_data.not_close_on_background_click)||this.hide(t)},show:function(){var t=this;if(!window.hasOwnProperty("optin_vars")){var e=Hustle.consts.Module_Show_Count+this.model.get("type")+"-"+this.model.get("id"),i=Hustle.cookie.get(e);Hustle.cookie.set(e,i+1,90)}t.animation_in!==t.animation_out&&t.$el.removeClass(t.animation_out),_.delay(function(){t.$el.addClass("wph-modal-show"),t.trigger("shown",t,t.model.get("type")),Hustle.Events.trigger("show_modal",t,t.model.get("type")),_.delay(function(){t.animation_in&&!t.$el.hasClass(t.animation_in)&&t.$el.addClass(t.animation_in)},350)},550)},sanitize_cta_url:function(t){return t.cta_url&&(/^(f|ht)tps?:\/\//i.test(t.cta_url)||(t.cta_url="http://"+t.cta_url)),t},enable_fullscreen:function(t){if(t.fullscreen="",!t||"undefined"==typeof t.optin_provider||"undefined"==typeof t.type)return t;if("custom_content"==t.optin_provider&&"popup"==t.type){if("undefined"==typeof this.type_data.make_fullscreen)return t;_.isTrue(this.type_data.make_fullscreen)&&(t.fullscreen="wph-modal-popup-fullscreen")}return t},handle_custom_size_cc:function(t){return t.custom_size_attr="",t.custom_size_class="",t&&"undefined"!=typeof t.optin_provider?("custom_content"==t.optin_provider&&(_.isTrue(t.customize_size)&&(t.custom_size_class="wph-modal--custom",t.custom_size_attr+="data-custom_width="+t.custom_width+" data-custom_height="+t.custom_height),_.isTrue(t.border)&&(t.custom_size_attr+=" data-border="+t.border_weight)),t):t},enable_body_scroll:function(e){if(e&&"undefined"!=typeof e.optin_provider&&"undefined"!=typeof e.type&&"custom_content"==e.optin_provider&&"popup"==e.type){if("undefined"==typeof this.type_data.allow_scroll_page)return;_.isTrue(this.type_data.allow_scroll_page)?t("html").addClass("can-scroll"):t("html").addClass("no-scroll")}},fire_conversion_event:function(e){var i=t(e.target).hasClass("wph-modal--cta")?"cta":"form";Hustle.Events.trigger("cc_modal_converted",this,i),this.trigger("converted",this,i)},never_see_again:function(e){e&&e.preventDefault(),window.hasOwnProperty("optin_vars")||Hustle.cookie.set(Hustle.consts.Never_See_Aagain_Prefix+this.model.get("type")+"-"+this.model.get("id"),this.model.get("id"),this.type_data.expiration_days),e&&!t(e.target).hasClass("wph-icon i-close")&&this.hide()},on_form_submit:function(e){var i=this,n=t(e.target),s=this.type_data.on_submit;switch(s){case"close":i.hide();break;case"redirect":window.location.replace(n.attr("action"));
break;case"default":}}})}),Hustle.define("Custom_Content.Display_Triggers",function(t,e,i){var n=Hustle.get("Modal"),s=function(e,i){t.ajax({type:"POST",url:inc_opt.ajaxurl,data:{action:"hustle_custom_content_viewed",data:{id:e.model.get("id"),page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:i,uri:encodeURI(window.location.href)}},success:function(t){}})},o=function(e,i){t.ajax({type:"POST",url:inc_opt.ajaxurl,data:{action:"hustle_custom_content_converted",data:{id:e.model.get("id"),page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:e.model.get("type"),uri:encodeURI(window.location.href),source:i}},success:function(t){}})},a=function(e,i){e.set({type:i},{silent:!0});var a=new n({model:e});if(_.indexOf(["popup"],i)!==-1&&a.$mask.appendTo("body"),a.$el.appendTo("body"),a.on("shown",s),a.on("converted",o),"slide_in"===i){var r=e.get("types")[i];if(r.hide_after){var l=parseInt(r.hide_after_val),c=r.hide_after_unit;"minutes"===c?l*=60:"hours"===c&&(l*=3600),l*=1e3,a.on("shown",function(){_.delay(function(){_.contains(["hide_all","no_show"],r.after_close)?a.never_see_again():a.hide()},l)})}}a.show(),Hustle.Events.trigger("cc_modal_shown",a,i),t(document).trigger("wpoi:cc_display",[i,a.$el,e.toJSON()])},r=!1,l=function(){r||(t(e).on("mouseleave",_.debounce(function(t){Hustle.Events.trigger("exit_intended",t)},10,!0)),r=!0)},c=!1,d=function(){if(!c)return!t("#hustle_optin_adBlock_detector").length},u=function(t,e,i){if("immediately"===t.on_time)a(i,e);else{var n=1e3*parseInt(t.on_time_delay,10);"minutes"===t.on_time_unit?n*=60:"hours"===t.on_time_unit&&(n*=3600),_.delay(a,n,i,e)}},p=function(n,s,o){var r=!1;if("scrolled"===n.on_scroll&&t(i).scroll(_.debounce(function(){r||100*i.pageYOffset/t(e).height()>=parseFloat(n.on_scroll_page_percent)&&(a(o,s),r=!0)},50)),"selector"===n.on_scroll){var l=t(n.on_scroll_css_selector);l.length&&t(i).scroll(_.debounce(function(){r||i.pageYOffset>=l.position().top&&(a(o,s),r=!0)},50))}},h=function(i,n,s){if(""!==t.trim(i.on_click_element)){var o=t(t.trim(i.on_click_element));o.length&&t(e).on("click",t.trim(i.on_click_element),_.bind(a,null,s,n))}},f=function(t,e,i){_.isTrue(t.on_exit_intent)&&(l(),_.isTrue(t.on_exit_intent_per_session)?Hustle.Events.once("exit_intended",_.bind(a,null,i,e)):Hustle.Events.on("exit_intended",_.bind(a,null,i,e)))},g=function(t,e,i){if(_.isTrue(t.on_adblock)){if(!d())return;if(_.isFalse(t.on_adblock_delayed))a(i,e);else{var n=1e3*parseInt(t.on_adblock_delayed_time,10);"minutes"===t.on_adblock_delayed_unit?n*=60:"hours"===t.on_adblock_delayed_unit&&(n*=3600),_.delay(a,n,i,e)}}};return{time:u,scroll:p,scrolled:p,click:h,exit_intent:f,adblock:g}}),function(t,e,i){var n=function(t,e,i){if("immediately"===e.trigger_on_time&&i.display(),"time"===e.trigger_on_time){var n;switch(e.appear_after_time_unit){case"minutes":n=60*parseInt(e.appear_after_time_val,10)*1e3;break;case"hours":n=60*parseInt(e.appear_after_time_val,10)*60*1e3;break;default:n=1e3*parseInt(e.appear_after_time_val,10)}_.delay(function(){i.display()},n)}},s=function(n,s,o){var a=!1;if("scrolled"===s.appear_after&&t(i).scroll(_.debounce(function(){a||100*i.pageYOffset/t(e).height()>=parseInt(s.appear_after_page_portion_val,10)&&(o.display(),a=!0)},50)),"selector"===s.appear_after){var r=t(s.appear_after_element_val);r.length&&t(i).scroll(_.debounce(function(){a||i.pageYOffset>=r.position().top&&(o.display(),a=!0)},50))}},o=function(i,n,s){if(""!==t.trim(n.trigger_on_element_click)){var o=t(t.trim(n.trigger_on_element_click));o.length&&t(e).on("click",t.trim(n.trigger_on_element_click),s.display)}t(e).on("click",".inc_opt_hustle_shortcode_trigger",function(e){e.preventDefault(),t(this).data("id")==i.data.optin_id&&"popup"==t(this).data("type")&&s.display()})},a=function(i,n,s){_.isTrue(n.trigger_on_exit)&&(Optin.listen_to_exit_intend(),_.isTrue(n.on_exit_trigger_once_per_session)?t(e).one("wpoi:exit_intended",s.display):t(e).on("wpoi:exit_intended",s.display))},r=function(t,e,i){if(_.isTrue(e.trigger_on_adblock)){if(!Optin.is_adblock_enabled())return;if(_.isTrue(e.trigger_on_adblock_timed)){var n;switch(e.trigger_on_adblock_timed_unit){case"minutes":n=60*parseInt(e.trigger_on_adblock_timed_val,10)*1e3;break;case"hours":n=60*parseInt(e.trigger_on_adblock_timed_val,10)*60*1e3;break;default:n=1e3*parseInt(e.trigger_on_adblock_timed_val,10)}_.delay(function(){i.display()},n)}else i.display()}};Optin.Triggers={time:n,scroll:s,scrolled:s,click:o,exit_intent:a,adblock:r}}(jQuery,document,window),function(t){t(document).on("wpoi:display",function(e,i,n,s){var o="wpoi-optin-{type}-shown-count-".replace("{type}",i)+s.data.optin_id,a=Optin.cookie.get(o)||0,r=i&&s.settings[i].is_test;r||Optin.cookie.set(o,a+1,30),t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"inc_opt_optin_viewed",data:{optin_id:s.data.optin_id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:i,uri:encodeURI(window.location.href)}},success:function(t){}})}),t(document).on("wpoi:cc_shortcode_or_widget_viewed",function(e,i,n){t.ajax({type:"POST",url:inc_opt.ajaxurl,data:{action:"hustle_custom_content_viewed",data:{id:n,page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:i,uri:encodeURI(window.location.href)}},success:function(t){}})})}(jQuery),function(t){Optin=Optin||{},Optin.handle_scroll=function(e,i,n){var s=t(window),o=t(document);s.on("scroll",_.debounce(function(t){var a=e[0],r=a.getBoundingClientRect();r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)&&(s.off(t),e.addClass("wpoi-show"),o.trigger("wpoi:display",[i,e,n]))},5,!0))},Optin.handle_cc_scroll=function(e,i,n){var s=t(window),o=t(document);s.on("scroll",_.debounce(function(t){var a=e[0],r=a.getBoundingClientRect();r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)&&(s.off(t),o.trigger("wpoi:cc_shortcode_or_widget_viewed",[i,n]))},5,!0))}}(jQuery),function(t){function e(e,i){var n=e.find(".required"),s=(t('<i class="wpoi-icon i-error"></i>'),[]);return t(".wpoi-field-error").remove(),n.each(function(){var e=t(this),n=e.attr("name")+"_error";return i?(e.next("label").find("i.wpoi-icon").addClass("i-error"),s.push(e),s):void(_.isEmpty(this.value)||e.is("[type='email']")&&!this.value.trim().match(/^[\S]+\@[a-zA-Z0-9\-]+\.[\S]{2,}$/gi)?(e.next("label").find("i.wpoi-icon").addClass("i-error"),s.push(e)):t("."+n).remove())}),0===s.length}t(document).on("submit",".inc_optin form",function(i){i.preventDefault();var n=t(i.target),s=n.find("button"),o=n.closest(".inc_optin"),a=o.data("handle"),r=o.data("delay_id"),l=Optins[a],c=this,d=(t(this).closest(".wpoi-optin > .wpoi-container"),n.closest(".inc_optin").data("type")),u=d&&l.settings[d].is_test,p=t("<span class='wpoi-submit-failure'>"+inc_opt.l10n.submit_failure+"</span>");n.parent().find(".wpoi-submit-failure").remove(),_.isUndefined(r)||clearTimeout(r),!n.data("sending")&&e(n,u)&&(s.attr("disabled",!0),s.addClass("loading"),n.addClass("loading"),n.data("sending",!0),t.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"inc_opt_submit_opt_in",data:{form:n.serialize(),optin_id:l.data.optin_id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,uri:encodeURI(window.location.href),type:d}},success:function(e){if(e&&e.success){var i=n.closest(".wpoi-hustle");l.design.hasOwnProperty("on_submit")&&"page_redirect"===l.design.on_submit?window.location.replace(l.design.page_redirect_url):(i.find(".wpoi-success-message").addClass("wpoi-show-message"),_.delay(function(){t(c).closest(".inc_optin").find(".inc-opt-close-popup").trigger("click")},3e3))}else n.after(p)},error:function(){n.after(p)},complete:function(){s.attr("disabled",!1),n.removeClass("loading"),s.removeClass("loading"),n.data("sending",!1)}}))})}(jQuery);var Optin=Optin||{};!function(t,e){"use strict";function i(){var e=o.height(),i=o.scrollTop(),n=i+e;t.each(s,function(){var e=t(this),s=e.outerHeight(),o=e.offset().top,a=o+s;a>=i&&o<=n?e.addClass("in-view"):e.removeClass("in-view")})}function n(e,i,n,s){"wpoi:display"!==e.type&&"wpoi:cc_display"!==e.type||"popup"!==i?t(".wpoi-hustle").each(function(){var e=t("popup"===i?window:this),n=t(this);e.width()<=405?n.find(".wpoi-optin").addClass("wpoi-small"):n.find(".wpoi-optin").removeClass("wpoi-small"),e.width()<=585&&e.width()>405?n.find(".wpoi-optin").addClass("wpoi-medium"):n.find(".wpoi-optin").removeClass("wpoi-medium")}):!function(){var e=t("popup"===i?window:this),s=n.find(".wpoi-hustle");e.width()<=405?s.find(".wpoi-optin").addClass("wpoi-small"):s.find(".wpoi-optin").removeClass("wpoi-small"),e.width()<=585&&e.width()>405?s.find(".wpoi-optin").addClass("wpoi-medium"):s.find(".wpoi-optin").removeClass("wpoi-medium")}(),t(".wpoi-mcg-select").each(function(){t(this).parent(".wpoi-provider-args > .wpoi-container > .wpoi-element:nth-child(2) > .wpoi-container > .wpoi-element").css({padding:"0",background:"transparent"})}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) .nocontent:not(.noimage)").each(function(){var e=t(this),i=e.find(".wpoi-aside-x").prev(".wpoi-element"),n=e.find(".wpoi-aside-x").prev(".wpoi-element").find(".wpoi-container.wpoi-col");n.css("height",i.height())}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) > .wpoi-container.noimage:not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-x"),n=e.find(".wpoi-image").next(".wpoi-element"),s=i.prev(".wpoi-element"),o=e.find(".wpoi-content"),a=s.find(".wpoi-col"),r=e.find("form");r.height()>o.height()&&(a.css("height",i.height()+"px"),n.addClass("wpoi-align"),o.addClass("wpoi-align-element")),r.height()<o.height()&&(i.css("height",s.height()+"px"),i.addClass("wpoi-align"),r.addClass("wpoi-align-element"))}),t(".wpoi-layout-three .wpoi-optin:not(.wpoi-small) > .wpoi-container:not(.noimage):not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-x"),n=i.prev(".wpoi-element"),s=e.find("form");s.height()<n.height()&&(i.css("height",n.height()),i.addClass("wpoi-align"),s.addClass("wpoi-align-element"))}),t(".wpoi-layout-four .wpoi-optin:not(.wpoi-small) > .wpoi-container.noimage:not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-xl"),n=e.find(".wpoi-aside-xl > .wpoi-container"),s=i.find(".wpoi-form"),o=i.find("form"),a=i.next(".wpoi-element"),r=a.find(".wpoi-content");r.height()>o.height()&&(n.css("height",i.height()+"px"),s.addClass("wpoi-align"),o.addClass("wpoi-align-element")),r.height()<o.height()&&(a.css("height",n.height()+"px"),a.addClass("wpoi-align"),r.addClass("wpoi-align-element"))}),t(".wpoi-layout-four .wpoi-optin:not(.wpoi-small) > .wpoi-container:not(.noimage):not(.nocontent)").each(function(){var e=t(this),i=e.find(".wpoi-aside-xl"),n=e.find(".wpoi-aside-xl > .wpoi-container"),s=e.find(".wpoi-image"),o=i.find(".wpoi-form"),a=i.find("form"),r=i.next(".wpoi-element"),l=e.find(".wpoi-content");l.height()>n.height()&&(n.css("height",i.height()+"px"),o.css("height",n.height()-s.height()),o.addClass("wpoi-align"),a.addClass("wpoi-align-element")),l.height()<n.height()&&(r.css("height",i.height()+"px"),r.addClass("wpoi-align"),l.addClass("wpoi-align-element"))}),t(".wph-modal").each(function(){var e=t(this),i=e.find(".wph-modal--content"),n=e.find(".wph-modal--content > section"),s=i.find("section > figure"),o=e.find(".wph-modal--content > figure"),a=s.find("img"),r=o.find("img"),l=e.hasClass("wph-modal--cabriolet")&&(s.hasClass("wph-modal--image_full")||s.hasClass("wph-modal--image")&&a.height()<s.height()),c=e.hasClass("wph-modal--simple")&&(o.hasClass("wph-modal--image_full")||o.hasClass("wph-modal--image")&&r.height()<o.height()),d=e.hasClass("wph-modal--minimal")&&(s.hasClass("wph-modal--image_full")||s.hasClass("wph-modal--image")&&a.height()<s.height());(l||d)&&a.css({height:n.height()+"px",width:n.width()+"px"}),c&&r.css({height:i.height()+"px",width:i.width()+"px"});var u=e.find(".wph-modal--content header"),p=e.find(".wph-modal--content footer"),h=e.find(".wph-modal--content"),_=e.find(".wph-modal--content .wph-modal--message"),f=e.find(".wph-modal--content section"),g=e.find(".wph-modal--content .wph-modal--image"),m=e.find(".wph-modal--content .wph-modal--image img"),v=parseInt(e.data("custom_width")),w=parseInt(e.data("custom_height")),y=2*parseInt(e.data("border"));y=isNaN(y)?0:y,v&&w&&(e.css("width",v+"px"),e.css("max-width","none"),e.hasClass("wph-modal--cabriolet")&&(_.outerHeight(w-u.outerHeight(!0)-y),g.outerHeight(_.outerHeight(!0)),m.outerHeight(_.outerHeight(!0))),e.hasClass("wph-modal--simple")&&(h.outerHeight(w),g.outerHeight(h.height()),m.outerHeight(h.height())),e.hasClass("wph-modal--minimal")&&(f.outerHeight(w-(u.outerHeight(!0)+p.outerHeight(!0))-y),g.outerHeight(f.outerHeight(!0)),m.outerHeight(f.outerHeight(!0))))}),t(".wph-cc-shortcode").each(function(){var e=t(this),i=e.find(".wph-cc-shortcode--content"),n=e.find(".wph-cc-shortcode--content > section"),s=i.find("section > figure"),o=e.find(".wph-cc-shortcode--content > figure"),a=s.find("img"),r=o.find("img"),l=e.hasClass("wph-cc-shortcode--cabriolet")&&(s.hasClass("wph-cc-shortcode--image_full")||s.hasClass("wph-cc-shortcode--image")&&a.height()<s.height()),c=e.hasClass("wph-cc-shortcode--simple")&&(o.hasClass("wph-cc-shortcode--image_full")||o.hasClass("wph-cc-shortcode--image")&&r.height()<o.height()),d=e.hasClass("wph-cc-shortcode--minimal")&&(s.hasClass("wph-cc-shortcode--image_full")||s.hasClass("wph-cc-shortcode--image")&&a.height()<s.height());(l||d)&&a.css({height:n.height()+"px",width:n.width()+"px"}),c&&r.css({height:i.height()+"px",width:i.width()+"px"})})}t.each(["show","hide"],function(e,i){var n=t.fn[i];t.fn[i]=function(){return this.trigger(i),n.apply(this,arguments)}}),Optin.get_tpl=function(t){var e=["optin-layout-one","optin-layout-two","optin-layout-three","optin-layout-four"];return Optin.template(e[t])},Optin.popup={shown:[],hidden:[],long_hidden:[],is_already_shown:function(t){return-1!==this.shown.indexOf(t)},is_long_hidden:function(t){return!!Optin.cookie.get(Optin.POPUP_COOKIE_PREFIX+t.id)},show:function(t){return!this.is_long_hidden(t)&&(this.is_already_shown(t.id)?void 0:t.show())}};var s=t(".inc_opt_inline_wrap"),o=t(window);t(e).on("wpoi:display",_.debounce(n,100,!1)),t(e).on("wpoi:cc_display",_.debounce(n,100,!1)),t(window).on("resize",_.debounce(n,100,!1)),o.on("scroll resize",_.debounce(i,100,!1)),o.trigger("scroll"),t(document).on("blur","input, textarea, select",function(){var e=t(this);e.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==e.val().trim()?e.parent().addClass("wpoi-filled"):e.parent().removeClass("wpoi-filled"))}),t(document).on("focus",".wpoi-optin input.required",function(){t(this).next("label").find("i.wpoi-icon").removeClass("i-error")}),Optin.render_provider_args=function(t){if(_.isEmpty(t.provider_args))return"";var e=Optin.template("optin-"+t.data.optin_provider+"-args");return e(t.provider_args)},Optin.render_optin=function(i){var n=i.design.form_location.toInt(),s=Optin.get_tpl(n),o=function(){return!("mailchimp"!==i.data.optin_provider||!i.provider_args||!i.provider_args.group||"hidden"===i.provider_args.group.form_field)},a=s(_.extend({image_style:""},i.design,i.design.borders,i.data,{has_args:o()}));return t(e).trigger("wpoi:layout:rendered"),a},Optin.render_cc_shortcode=function(i){var n=Optin.template("hustle-cc-shortcode-tpl"),s=n(_.extend({},i.content,i.design));return t(e).trigger("wpoi:layout:rendered"),s};var a=!1;Optin.listen_to_exit_intend=function(){a||(t(e).on("mouseleave",_.debounce(function(i){t(e).trigger("wpoi:exit_intended",i)},100,!0)),a=!0)};var r=!1;Optin.is_adblock_enabled=function(){if(!r)return!t("#hustle_optin_adBlock_detector").length}}(jQuery,document),function(t){t(".inc_opt_after_content_wrap").each(function(){var e=t(this),i=e.data("id");if(i){var n=_.find(Optins,function(t){return i==t.data.optin_id});if(n&&(e.data("handle",_.findKey(Optins,n)),e.data("type","after_content"),_.isTrue(n.settings.after_content.display))){var s=Optin.render_optin(n);Optin.handle_scroll(e,"after_content",n),e.html(s),e.find(".wpoi-provider-args").html(Optin.render_provider_args(n)),t(document).trigger("wpoi:display",["after_content",e,n]),n.settings.after_content.animate&&"true"==n.settings.after_content.animate&&e.addClass(n.settings.after_content.animation)}}})}(jQuery),function(t,e,i){"use strict";var n=Hustle.get("Custom_Content.Display_Triggers");_(Hustle_Custom_Contents).each(function(t){var e=new Backbone.Model(_.extend({},{id:t.content.optin_id,type:"popup"},t.design,t.content,{types:{popup:t.popup,slide_in:t.slide_in,magic_bar:t.magic_bar}}));_.chain({popup:t.popup,slide_in:t.slide_in,magic_bar:t.magic_bar}).reduce(function(e,i,n){var s=Hustle.cookie.get(Hustle.consts.Never_See_Aagain_Prefix+n+"-"+t.content.optin_id)==t.content.optin_id;return"undefined"!=typeof i.after_close&&"slide_in"==n&&"keep_showing"==i.after_close&&s&&(s=!1,Hustle.cookie.set(Hustle.consts.Never_See_Aagain_Prefix+n+"-"+t.content.optin_id,t.content.optin_id,0)),t.should_display[n]&&_.isTrue(i.enabled)&&!s&&(e[n]=i),e},{}).map(function(t,i){"magic_bar"!==i&&("function"==typeof n[t.triggers.trigger]?n[t.triggers.trigger].call(null,t.triggers,i,e):console.log("Hustle:[Popup] No trigger defined for ".type_data.triggers.trigger))})})}(jQuery,document,window),function(t,e,i){if(!inc_opt.is_upfront){var n=_.keys(Optins),s=!1,o=!1;if(t.each(n,function(t,e){var i=Optins[e];_.isTrue(i.settings.popup.display)&&!_.isTrue(Optin.cookie.get(Optin.POPUP_COOKIE_PREFIX+i.data.optin_id))&&(o=e,s=Optins[o])}),s!==!1){var a=Optin.render_optin(s),r=_.isTrue(s.settings.popup.add_never_see_this_message)?'<div class="wpoi-nsa"><a class="inc_opt_never_see_again">%s</a></div>'.replace("%s",inc_opt.l10n.never_see_again):"",l=t('<div class = "inc_opt_popup wpoi-animate inc_optin inc_optin_'+s.data.optin_id+'"><a href="#" aria-label="Close" class="inc-opt-close-popup">&times;</a>'+a+r+"</div>");l.find(".wpoi-provider-args").html(Optin.render_provider_args(s)),s.settings.popup.animation_in&&l.addClass(s.settings.popup.animation_in),l.data("handle",o),l.on("hide",function(){Optin.popup.hidden.push(s.data.optin_id),Optin.popup.long_hidden.push(s.data.optin_id),_.delay(function(){l.removeClass("wpoi-show"),t(".wpoi-overlay-mask").removeClass("wpoi-show")},750),_.isTrue(s.settings.popup.close_button_acts_as_never_see_again)&&Optin.cookie.set(Optin.POPUP_COOKIE_PREFIX+s.data.optin_id,s.data.optin_id,parseInt(s.settings.popup.never_see_expiry,10)),s.settings.popup.animation_in&&(s.settings.popup.animation_out?_.delay(function(){l.removeClass(s.settings.popup.animation_out),l.addClass(s.settings.popup.animation_in)},350):l.addClass(s.settings.popup.animation_in)),s.settings.popup.animation_out||l.find(".wpoi-show-message").removeClass("wpoi-show-message"),t(document).trigger("wpoi:hide",["popup",l,l.data("popup")])}),l.data("handle",o),l.data("popup",s),l.data("type","popup"),l.appendTo("body"),l.display=function(){l.is(".wpoi-show")||(l.removeClass(s.settings.popup.animation_out),t(l).prev(".wpoi-overlay-mask").length?l.prev(".wpoi-overlay-mask").addClass("wpoi-show"):t('<div class="inc_optin_'+s.data.optin_id+' wpoi-overlay-mask wpoi-animate fadein"><div class="wpoi-popup-overlay"></div></div>').insertBefore(l).addClass("wpoi-show"),s.settings.popup.animation_in&&l.addClass(s.settings.popup.animation_in),_.delay(function(){l.addClass("wpoi-show"),s.settings.popup.animation_out?s.settings.popup.animation_in?_.delay(function(){l.removeClass(s.settings.popup.animation_in),l.addClass(s.settings.popup.animation_out)},350):l.addClass(s.settings.popup.animation_out):s.settings.popup.animation_in&&_.delay(function(){l.removeClass(s.settings.popup.animation_in)},350)},750),t(document).trigger("wpoi:display",["popup",l,l.data("popup")]))},"function"==typeof Optin.Triggers[s.settings.popup.appear_after]?Optin.Triggers[s.settings.popup.appear_after].call(null,s,s.settings.popup,l):console.log("Hustle:[Popup] No trigger defined for ".popup_optin.settings.popup.appear_after)}t(document).on("click",".inc-opt-close-popup, .wpoi-overlay-mask",function(i){i.preventDefault();var n=t(i.target),o=n.closest(".inc_optin");t(this).hasClass("wpoi-overlay-mask")&&(o=t(this).next(".inc_optin")),o.removeClass("wpoi-show"),o.trigger("hide"),s.settings&&!s.settings.popup.animation_out&&(o.hide(),_.defer(function(){(o[0].style||{}).display=""})),_.isTrue(s.settings.popup.close_button_acts_as_never_see_again)&&_.isTrue(s.settings.popup.trigger_on_exit)&&t(e).off("wpoi:exit_intended")}),t(document).on("click",".inc_opt_never_see_again",function(i){i.preventDefault(),Optin.cookie.set(Optin.POPUP_COOKIE_PREFIX+s.data.optin_id,s.data.optin_id,parseInt(s.settings.popup.never_see_expiry,10)),t(this).closest(".inc_opt_popup").find(".inc-opt-close-popup").trigger("click"),_.isTrue(s.settings.popup.add_never_see_this_message)&&_.isTrue(s.settings.popup.trigger_on_exit)&&t(e).off("wpoi:exit_intended")})}}(jQuery,document,window),function(t,e,i){if(!inc_opt.is_upfront&&!_.isTrue(Optin.cookie.get(Optin.SLIDE_IN_COOKIE_HIDE_ALL))){var n=_.keys(Optins),s=!1,o=!1;if(t.each(n,function(t,e){var i=Optins[e],n=Optin.cookie.get(Optin.SLIDE_IN_COOKIE_PREFIX+i.data.optin_id);"keep_showing"==i.settings.slide_in.after_close&&n&&(n=!1,Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+i.data.optin_id,i.data.optin_id,0)),_.isTrue(i.settings.slide_in.display)&&!_.isTrue(n)&&(o=e,s=i)}),0!=s){var a=Optin.render_optin(s),r=_.isTrue(s.settings.slide_in.add_never_see_this_message)?'<div class="wpoi-nsa"><a class="inc_opt_never_see_again">%s</a></div>'.replace("%s",inc_opt.l10n.never_see_again):"",l=t('<div class="inc_opt_slidein inc_opt_slidein_'+s.settings.slide_in.position+" inc_optin inc_optin_"+s.data.optin_id+' wpoi-slide"><a href="#" class="inc-opt-close-popup" aria-label="Close" >&times;</a>'+a+r+"</div>");l.find(".wpoi-provider-args").html(Optin.render_provider_args(s)),l.data("handle",o),l.on("show",function(){if(Optin.popup.shown.push(l.id),_.isTrue(s.settings.slide_in.hide_after)){var t="minutes"===s.settings.slide_in.hide_after_unit?60*parseInt(s.settings.slide_in.hide_after_val,10)*1e3:1e3*parseInt(s.settings.slide_in.hide_after_val,10),e=_.delay(function(){l.data("prevent_hide_after")||(l.removeClass("wpoi-show"),l.trigger("hide"))},t);l.data("delay_id",e)}}),l.data("handle",o),l.data("popup",s),l.data("type","slide_in"),l.on("hide",function(){var e=t(this),i=e.data("popup");"hide_all"===i.settings.slide_in.after_close&&Optin.cookie.set(Optin.SLIDE_IN_COOKIE_HIDE_ALL,i.data.optin_id,30),"no_show"===i.settings.slide_in.after_close&&Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+i.data.optin_id,i.data.optin_id,30),t(document).trigger("wpoi:hide",["slide_in",e,i])}),l.appendTo("body"),l.on("click",function(){l.data("prevent_hide_after",!0)}),l.display=function(){l.is(".wpoi-show")||l.is(".wpoi-shown")||(l.addClass("wpoi-show"),l.addClass("wpoi-shown"),l.show(),s.settings.slide_in.animation_out?s.settings.slide_in.animation_in?_.delay(function(){l.removeClass(s.settings.slide_in.animation_in),l.addClass(s.settings.slide_in.animation_out)},350):l.addClass(s.settings.slide_in.animation_out):s.settings.slide_in.animation_in&&_.delay(function(){l.removeClass(s.settings.slide_in.animation_in)},350),l.trigger("show"),t(document).trigger("wpoi:display",["slide_in",l,l.data("popup")]))},"function"==typeof Optin.Triggers[s.settings.slide_in.appear_after]?Optin.Triggers[s.settings.slide_in.appear_after].call(null,s,s.settings.slide_in,l):console.log("Hustle:[Popup] No trigger defined for ".popup_optin.settings.popup.appear_after)}}}(jQuery,document,window),function(t){Optin=Optin||{},Optin.handle_cc_shortcode_conversion=function(e,i){var n=(t(window),t(document));t(n).on("click","a.wph-cc-shortcode--cta",function(t){var n={id:e,type:i,source:"cta"};Optin.save_cc_shortcode_conversion(n)})},Optin.save_cc_shortcode_conversion=function(e){t.ajax({type:"POST",url:inc_opt.ajaxurl,data:{action:"hustle_custom_content_converted",data:{id:e.id,page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:e.type,uri:encodeURI(window.location.href),source:e.source}},success:function(t){}})};var e=_.debounce(function(){t(".inc_cc_widget_wrap, .inc_cc_shortcode_wrap").each(function(){var e=t(this),i=e.data("id"),n=e.is(".inc_cc_widget_wrap")?"widget":"shortcode";if(i){var s=_.find(Hustle_Custom_Contents,function(t){return i==t.content.optin_id});if(s){e.data("handle",_.findKey(Hustle_Custom_Contents,s)),e.data("type",n),s.design.cta_url&&(/^(f|ht)tps?:\/\//i.test(s.design.cta_url)||(s.design.cta_url="http://"+s.design.cta_url));var o=Optin.render_cc_shortcode(s);Optin.handle_cc_scroll(e,n,i),e.html(o),_.delay(function(){t(document).trigger("wpoi:cc_shortcode_or_widget_viewed",[n,i])},_.random(0,300)),Optin.handle_cc_shortcode_conversion(i,n)}}}),t(".inc_opt_widget_wrap, .inc_opt_shortcode_wrap").each(function(){var e=t(this),i=e.data("id"),n=e.is(".inc_opt_widget_wrap")?"widget":"shortcode";if(i){var s=_.find(Optins,function(t){return i==t.data.optin_id});if(s){e.data("handle",_.findKey(Optins,s)),e.data("type",n);var o=Optin.render_optin(s);Optin.handle_scroll(e,n,s),e.html(o),e.find(".wpoi-provider-args").html(Optin.render_provider_args(s)),_.delay(function(){t(document).trigger("wpoi:display",[n,e,s])},_.random(0,300))}}})},50,!0);e(),t(document).on("upfront-load",function(){e(),Upfront.Events.on("entity:object:refresh:start entity:object:refresh preview:build:start upfront:preview:build:stop",e)})}(jQuery);
//# sourceMappingURL=maps/front.min.js.map
